!function(e){e.slickQuiz=function(n,t){var a=this,o=e(n),s="#"+o.attr("id"),l={checkAnswerText:"!",nextQuestionText:"Siguiente &raquo;",backButtonText:"",completeQuizText:"",tryAgainText:"",questionCountText:"Pregunta %current de %total",preventUnansweredText:"Debes seleccionar una respuesta.",questionTemplateText:"%count. %text",scoreTemplateText:"%score / %total",nameTemplateText:"<span>Test - </span>%name",skipStartButton:!1,numberOfQuestions:null,randomSortQuestions:!1,randomSortAnswers:!1,preventUnanswered:!0,disableScore:!0,disableRanking:!0,scoreAsPercentage:!1,perQuestionResponseMessaging:!1,perQuestionResponseAnswers:!1,completionResponseMessaging:!1,displayQuestionCount:!0,displayQuestionNumber:!0,animationCallbacks:{setupQuiz:function(){},startQuiz:function(){},resetQuiz:function(){},checkAnswer:function(){},nextQuestion:function(){},backToQuestion:function(){},completeQuiz:function(){}},events:{onStartQuiz:function(e){},onCompleteQuiz:function(e){sendForm()}}},r="questionCount",c="questions",u="question",d="answers",p="responses",f="complete",h="correctResponse",g="incorrectResponse",m="correct",v="incorrect",b="checkAnswer",k="nextQuestion",Q="lastQuestion",y="backToQuestion",w="tryAgain",z="."+r,x="."+c,C="."+u,T="."+d,A="."+d+" li",q="."+p,R="."+p+" li",S="."+h,K="."+m,N="."+v,I="."+b,M="."+k,O="."+y,_="."+w,U=s+" .startQuiz",D=s+" .quizName",G=s+" .quizArea",B=s+" .quizResults",P=s+" .quizResultsCopy",L=s+" .quizHeader",j=s+" .quizScore",F=s+" .quizLevel",E=e(U),J=e(D),X=e(G),H=e(B),V=e(P),W=e(L),Y=(e(j),e(F)),Z="";t&&"undefined"!=typeof t.disableNext&&("undefined"==typeof t.preventUnanswered&&(t.preventUnanswered=t.disableNext),Z+="The 'disableNext' option has been deprecated, please use 'preventUnanswered' in it's place.\n\n"),t&&"undefined"!=typeof t.disableResponseMessaging&&("undefined"==typeof t.preventUnanswered&&(t.perQuestionResponseMessaging=t.disableResponseMessaging),Z+="The 'disableResponseMessaging' option has been deprecated, please use 'perQuestionResponseMessaging' and 'completionResponseMessaging' in it's place.\n\n"),t&&"undefined"!=typeof t.randomSort&&("undefined"==typeof t.randomSortQuestions&&(t.randomSortQuestions=t.randomSort),"undefined"==typeof t.randomSortAnswers&&(t.randomSortAnswers=t.randomSort),Z+="The 'randomSort' option has been deprecated, please use 'randomSortQuestions' and 'randomSortAnswers' in it's place.\n\n"),""!==Z&&("undefined"!=typeof console?console.warn(Z):alert(Z)),a.config=e.extend(l,t);var $=a.config.json?a.config.json:"undefined"!=typeof quizJSON?quizJSON:null,ee=a.config.randomSortQuestions?$.questions.sort(function(){return Math.round(Math.random())-.5}):$.questions,ne=ee.length;a.config.numberOfQuestions&&ne>=a.config.numberOfQuestions&&(ee=ee.slice(0,a.config.numberOfQuestions),ne=ee.length);var te={method:{getKey:function(n){var t=[];for(i=0;i<n;i++)t[i]=e.Deferred();return t},turnKeyAndGo:function(n,t){e.when.apply(null,n).then(function(){t()})},getKeyNotch:function(e,n){return function(){e[n-1].resolve()}}}};a.method={setupQuiz:function(n){var t,o,s;t=te.method.getKey(3),o=te.method.getKeyNotch,s=o,J.hide().html(a.config.nameTemplateText.replace("%name",$.info.name)).fadeIn(1e3,s(t,1)),W.hide().prepend(e('<div class="quizDescription">'+$.info.main+"</div>")).fadeIn(1e3,s(t,2)),V.append($.info.results),a.config.tryAgainText&&""!==a.config.tryAgainText&&V.append('<p><a class="button '+w+'" href="#">'+a.config.tryAgainText+"</a></p>");var l=e('<ol class="'+c+'"></ol>'),f=1;for(i in ee)if(ee.hasOwnProperty(i)){var h=ee[i],g=e('<li class="'+u+'" id="question'+(f-1)+'"></li>');a.config.displayQuestionCount&&g.append('<div class="'+r+'">'+a.config.questionCountText.replace("%current",'<span class="current">'+f+"</span>").replace("%total",'<span class="total">'+ne+"</span>")+"</div>");var z="";z=a.config.displayQuestionNumber?a.config.questionTemplateText.replace("%count",f).replace("%text",h.q):h.q,g.append('<h3 class="color-purple2">'+z+"</h3>");var x=0;for(i in h.a)h.a.hasOwnProperty(i)&&(answer=h.a[i],answer.correct&&x++);var C=e('<ul class="'+d+'"></ul>'),T=a.config.randomSortAnswers?h.a.sort(function(){return Math.round(Math.random())-.5}):h.a,A=(h.select_any?h.select_any:!1,h.force_checkbox?h.force_checkbox:!1,"preguntas"),q="radio";f==$.questions.length&&(k=k+" "+Q);for(i in T)if(T.hasOwnProperty(i)){answer=T[i],optionId=A+"["+answer.idQuestion+"]",inputNameX=A+"["+answer.idQuestion+"]";var R='<input id="'+optionId+i+'" name="'+inputNameX+'" type="'+q+'" value="'+answer.value+'" class="m-radio__input"/> ',S='<label for="'+optionId+i+'" class="m-radio__input-label"><span></span>'+answer.option+"</label>",K=e("<li></li>").append(R).append(S);C.append(K)}if(g.append(C),a.config.perQuestionResponseMessaging||a.config.completionResponseMessaging){var N=e('<ul class="'+p+'"></ul>');N.append('<li class="'+m+'">'+h.correct+"</li>"),N.append('<li class="'+v+'">'+h.incorrect+"</li>"),g.append(N)}a.config.backButtonText&&""!==a.config.backButtonText&&g.append('<a href="#" class="pure-button bg-purple3 color-white'+y+'">'+a.config.backButtonText+"</a>");var I=a.config.nextQuestionText;a.config.completeQuizText&&f==ne&&(I=a.config.completeQuizText),a.config.perQuestionResponseMessaging?(g.append('<a href="#" class="pure-button bg-purple3 color-white '+k+'">'+I+"</a>"),g.append('<a href="#" class="pure-button bg-purple3 color-white '+b+'">'+a.config.checkAnswerText+"</a>")):g.append('<a href="#" class="pure-button bg-purple3 color-white '+k+" "+b+'">'+I+"</a>"),l.append(g),f++}X.append(l),a.config.skipStartButton||0==E.length?(E.hide(),a.method.startQuiz.apply(this,[{callback:a.config.animationCallbacks.startQuiz}]),s(t,3).apply(null,[])):E.fadeIn(500,s(t,3)),te.method.turnKeyAndGo(t,n&&n.callback?n.callback:function(){})},startQuiz:function(n){function t(n){var t=e(s+" "+x+" li").first();t.length&&t.fadeIn(500,function(){n&&n.callback&&n.callback()})}var i,o,l;i=te.method.getKey(1),o=te.method.getKeyNotch,l=o,a.config.skipStartButton||0==E.length?t({callback:l(i,1)}):E.fadeOut(300,function(){t({callback:l(i,1)})}),te.method.turnKeyAndGo(i,n&&n.callback?n.callback:function(){}),a.config.events&&a.config.events.onStartQuiz&&a.config.events.onStartQuiz.apply(null,[])},resetQuiz:function(n,t){var i,o,l;i=te.method.getKey(1),o=te.method.getKeyNotch,l=o,H.fadeOut(300,function(){e(s+" input").prop("checked",!1).prop("disabled",!1),Y.attr("class","quizLevel"),e(s+" "+C).removeClass(h).removeClass(g).remove(f),e(s+" "+A).removeClass(m).removeClass(v),e(s+" "+C+","+s+" "+q+","+s+" "+R+","+s+" "+M+","+s+" "+O).hide(),e(s+" "+z+","+s+" "+T+","+s+" "+I).show(),X.append(e(s+" "+x)).show(),l(i,1).apply(null,[]),a.method.startQuiz({callback:a.config.animationCallbacks.startQuiz},H)}),te.method.turnKeyAndGo(i,t&&t.callback?t.callback:function(){})},checkAnswer:function(n,t){var o,s,l;o=te.method.getKey(2),s=te.method.getKeyNotch,l=s;var r=e(e(n).parents(C)[0]),c=r.find(T+" li"),u=c.find("input:checked"),d=parseInt(r.attr("id").replace(/(question)/,""),10),p=ee[d].a,b=ee[d].select_any?ee[d].select_any:!1;c.addClass(v);var k=[];for(i in p)if(p.hasOwnProperty(i)){var Q=p[i],y=parseInt(i,10);Q.correct&&(k.push(y),c.eq(y).removeClass(v).addClass(m))}var w=[];if(u.each(function(){var n=e(this).attr("id");w.push(parseInt(n.replace(/(.*\_question\d{1,}_)/,""),10))}),a.config.preventUnanswered&&0===w.length)return alert(a.config.preventUnansweredText),!1;var z=a.method.compareAnswers(k,w,b);z?r.addClass(h):r.addClass(g),r.find(z?K:N).show(),a.config.perQuestionResponseMessaging?(e(n).hide(),a.config.perQuestionResponseAnswers?r.addClass(f):r.find(T).hide({duration:0,complete:function(){r.addClass(f)}}),r.find("input").prop("disabled",!0),r.find(q).show(),r.find(M).fadeIn(300,l(o,1)),r.find(O).fadeIn(300,l(o,2)),r.find(O).length||l(o,2).apply(null,[])):(l(o,1).apply(null,[]),l(o,2).apply(null,[])),te.method.turnKeyAndGo(o,t&&t.callback?t.callback:function(){})},nextQuestion:function(n,t){var i,o,s;i=te.method.getKey(1),o=te.method.getKeyNotch,s=o;var l=e(e(n).parents(C)[0]),r=l.next(C),c=l.find("input:checked");return a.config.preventUnanswered&&0===c.length?!1:(r.length?l.fadeOut(300,function(){r.find(O).show().end().fadeIn(500,s(i,1)),r.find(O).show().end().length||s(i,1).apply(null,[])}):(s(i,1).apply(null,[]),a.method.completeQuiz({callback:a.config.animationCallbacks.completeQuiz})),void te.method.turnKeyAndGo(i,t&&t.callback?t.callback:function(){}))},backToQuestion:function(n,t){var a,i,o;a=te.method.getKey(2),i=te.method.getKeyNotch,o=i;var s=e(e(n).parents(C)[0]),l=s.find(q);if("block"===l.css("display"))s.find(q).fadeOut(300,function(){s.removeClass(h).removeClass(g).removeClass(f),s.find(q+", "+R).hide(),s.find(T).show(),s.find(A).removeClass(m).removeClass(v),s.find("input").prop("disabled",!1),s.find(T).fadeIn(500,o(a,1)),s.find(I).fadeIn(500,o(a,2)),s.find(M).hide(),"question0"!=s.attr("id")?s.find(O).show():s.find(O).hide()});else{var r=s.prev(C);s.fadeOut(300,function(){r.removeClass(h).removeClass(g).removeClass(f),r.find(q+", "+R).hide(),r.find(T).show(),r.find(A).removeClass(m).removeClass(v),r.find("input").prop("disabled",!1),r.find(M).hide(),r.find(I).show(),"question0"!=r.attr("id")?r.find(O).show():r.find(O).hide(),r.fadeIn(500,o(a,1)),o(a,2).apply(null,[])})}te.method.turnKeyAndGo(a,t&&t.callback?t.callback:function(){})},completeQuiz:function(n){var t,i,o;t=te.method.getKey(1),i=te.method.getKeyNotch,o=i;var l=e(s+" "+S).length,r=l;if(a.config.scoreAsPercentage&&(r=100*(l/ne).toFixed(2)+"%"),a.config.disableScore?e(j).remove():e(j+" span").html(a.config.scoreTemplateText.replace("%score",r).replace("%total",ne)),a.config.disableRanking)e(F).remove();else{var c=[$.info.level1,$.info.level2,$.info.level3,$.info.level4,$.info.level5],u=a.method.calculateLevel(l),d=e.isNumeric(u)?c[u]:"";e(F+" span").html(d),e(F).addClass("level"+u)}X.fadeOut(300,function(){a.config.completionResponseMessaging?(e(s+" .button:not("+_+"), "+s+" "+z).hide(),e(s+" "+C+", "+s+" "+T+", "+s+" "+q).show(),H.append(e(s+" "+x)).fadeIn(500,o(t,1))):H.fadeIn(500,o(t,1))}),te.method.turnKeyAndGo(t,n&&n.callback?n.callback:function(){}),a.config.events&&a.config.events.onCompleteQuiz&&a.config.events.onCompleteQuiz.apply(null,[{questionCount:ne,score:l}])},compareAnswers:function(n,t,a){return a?e.inArray(t[0],n)>-1:0===e(n).not(t).length&&0===e(t).not(n).length},calculateLevel:function(e){var n=(e/ne).toFixed(2),t=null;return a.method.inRange(0,.2,n)?t=4:a.method.inRange(.21,.4,n)?t=3:a.method.inRange(.41,.6,n)?t=2:a.method.inRange(.61,.8,n)?t=1:a.method.inRange(.81,1,n)&&(t=0),t},inRange:function(e,n,t){return t>=e&&n>=t}},a.init=function(){a.method.setupQuiz.apply(null,[{callback:a.config.animationCallbacks.setupQuiz}]),E.on("click",function(n){n.preventDefault(),this.disabled||e(this).hasClass("disabled")||a.method.startQuiz.apply(null,[{callback:a.config.animationCallbacks.startQuiz}])}),e(s+" "+_).on("click",function(e){e.preventDefault(),a.method.resetQuiz(this,{callback:a.config.animationCallbacks.resetQuiz})}),e(s+" "+I).on("click",function(e){e.preventDefault(),a.method.checkAnswer(this,{callback:a.config.animationCallbacks.checkAnswer})}),e(s+" "+O).on("click",function(e){e.preventDefault(),a.method.backToQuestion(this,{callback:a.config.animationCallbacks.backToQuestion})}),e(s+" "+M).on("click",function(e){e.preventDefault(),a.method.nextQuestion(this,{callback:a.config.animationCallbacks.nextQuestion})});var n=o.attr("id")+"-name";J.attr("id",n),o.attr({"aria-labelledby":n,"aria-live":"polite","aria-relevant":"additions",role:"form"}),e(U+', [href = "#"]').attr("role","button")},a.init()},e.fn.slickQuiz=function(n){return this.each(function(){void 0===e(this).data("slickQuiz")&&(pluginExtra=new e.slickQuiz(this,n),e(this).data("slickQuiz",pluginExtra))})}}(jQuery);