!function(){var t=null,e=null,i=null,n=null,a=null,l=null,o=null,s=null,d=null,c=null,r=null,u=null,v=null,m=null,h=null,p=null,f=null,g=null,y=null,j=null,b=null,_=null,C=null,T=null,k=null,w=null,S=null,x=null,A=null,G=null,M=null,O=null,P=null,E=null,H=null,I=function(){function _(t){for(var e=t+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var a=i[n];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(e))return a.substring(e.length,a.length)}return null}function C(){P?(_played_once=!1,s[0].pause()):(_played_once=!0,document.cookie="played = true",s[0].play())}function k(){var e=t.height(),i=t.scrollTop(),n=i+e;$.each(A,function(){var t=$(this),e=t.outerHeight(),a=t.offset().top,l=a+e;l>=i&&n>=a&&setTimeout(function(){t.addClass("shake-to-view")},1500)})}var G=initAnalytics();P=_("played"),u.attr("src","../assets/videos/bienvenida_emus.mp4"),v.attr("src","./assets/videos/bienvenida_emus.webm"),m.attr("src","./assets/videos/bienvenida_emus.ogv"),l.attr("poster","./assets/images/training/welcome_intro.jpg"),C(),t.on("scroll rezise",k),t.trigger("scroll"),e.on("click",function(){M=$(this).data().id,g=$(this).data().modality,y=$(this).data().image,O=$(this).context.children[0],S.removeClass("is-modality-active"),$(O).addClass("is-modality-active"),setTimeout(function(){$("body, html").animate({scrollTop:$("#training-modality-selected").offset().top-25},800)},100),$(O).has("selected")&&void 0!==$(O).parent().data()&&($(O).removeClass("selected"),i.removeClass(function(t,e){return(e.match(/\bcolor-\S+/g)||[]).join(" ")}),h.removeClass(function(t,e){return(e.match(/\bcolor-\S+/g)||[]).join(" ")}),T.removeClass(function(t,e){return(e.match(/\bcolor-\S+/g)||[]).join(" ")}),p.removeClass(function(t,e){return(e.match(/\bcolor-\S+/g)||[]).join(" ")}),x.removeClass(function(t,e){return(e.match(/\bcolor-\S+/g)||[]).join(" ")}),f.removeClass(function(t,e){return(e.match(/\bcolor-\S+/g)||[]).join(" ")})),$(O).addClass("selected"),$(O).attr("src","./assets/images/emus/"+y+".png"),w.css("opacity",0),$.ajax({url:"/validateTest/"+M,method:"GET",cache:!1,dataType:"json",contentType:"application/json"}).then(function(t){t.data&&t.data.calificacion>=80?(x.empty().html("<b>¡Felicidades!</b> <br> Has aprobado el test de esta modalidad"),T.removeAttr("href").css("display","none")):(x.empty().text("¡Prueba tus conocimientos!"),T.css("display","inline-block"))}),$.getJSON({url:"./assets/training/"+g+".json",method:"GET",cache:!1,dataType:"json",contentType:"application/json"}).then(function(t){E(t.id_video),w.css("display","block").animate({opacity:1},500),i.html(t.modality).addClass(t["class"]),n.html(t.description),a.attr("poster",t.video_foreground),o.attr("data-id",t.id_video),d.attr("src",t.video.mp4),c.attr("src",t.video.webm),r.attr("src",t.video.ogv),h.attr({href:t.guide,"data-id":t.id_guide}).addClass(t["class"]),T.attr("href",t.url_test).addClass(t["class"]),void 0===t.calculator||""===t.calculator?(p.css("display","none"),p.removeAttr("href")):p.css("display","inline-block").attr("href",t.calculator).addClass(t["class"]),f.attr("href",t.finance).addClass(t["class"]),x.addClass(t["class"])}),G.clickModalityTraining(g)}),h.on("click",function(t){O=$(this).data().id;var e=$(this)[0].pathname.split("/assets/downloads/")[1].split(".pdf")[0];$.ajax({type:"POST",url:"/home/contadorGuias",data:{id_guia:O}}),G.clickDownloadModalityGuide(e)});var E=function(t){_id_video=t;var e=setInterval(function(){j=o.find("video").get(0).duration,b=o.find("video").get(0).currentTime,b=Math.round(b/j*100),100===b&&i(_id_video)},500),i=function(t){clearInterval(e),$.ajax({type:"POST",url:"/home/contadorVideos",data:{id_video:t}})}};H.on("click",function(){G.clickProfile()}),T.on("click",function(){var t=$(this)[0].pathname.split("/cuestionario/")[1];G.clickModalityTest(t)})};t=$(window),e=$(".js-training-modality-selected"),_$id_training_modality_selected=$("#training-modality-selected"),i=$(".js-modality"),n=$(".js-description"),a=$(".js-poster-video"),l=$(".js-poster-welcome"),o=$(".js-video"),s=$("#bienvenida-video"),d=$("video#video:nth-child(1)"),c=$("video#video:nth-child(2)"),r=$("video#video:nth-child(3)"),u=$("video#bienvenida-video:nth-child(1)"),v=$("video#bienvenida-video:nth-child(2)"),m=$("video#bienvenida-video:nth-child(3)"),h=$(".js-guide"),p=$(".js-calculator"),f=$(".js-finance"),_=$(".js-test"),T=$(".js-intent-link"),C=$(".js-intent-fail"),k=$(".js-change-modality"),w=$(".js-content-modality"),S=$(".js-image-selected"),x=$(".js-ready-test"),G=$(".js-intents"),A=$(".js-animation-element"),E=$(".js-content-test"),H=$(".js-dashboard-user"),I()}(jQuery);