function RGBColor(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var e,i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(e in i)t==e&&(t=i[e]);var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}];for(e=0;e<n.length;e++){var r=n[e].process,a=n[e].re.exec(t);a&&(channels=r(a),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=0>this.r||isNaN(this.r)?0:255<this.r?255:this.r,this.g=0>this.g||isNaN(this.g)?0:255<this.g?255:this.g,this.b=0>this.b||isNaN(this.b)?0:255<this.b?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),"#"+t+e+i},this.getHelpXML=function(){for(var t=[],e=0;e<n.length;e++)for(var r=n[e].example,a=0;a<r.length;a++)t[t.length]=r[a];for(var s in i)t[t.length]=s;for(r=document.createElement("ul"),r.setAttribute("id","rgbcolor-examples"),e=0;e<t.length;e++)try{var o=document.createElement("li"),l=new RGBColor(t[e]),h=document.createElement("div");h.style.cssText="margin: 3px; border: 1px solid black; background:"+l.toHex()+"; color:"+l.toHex(),h.appendChild(document.createTextNode("test"));var u=document.createTextNode(" "+t[e]+" -> "+l.toRGB()+" -> "+l.toHex());o.appendChild(h),o.appendChild(u),r.appendChild(o)}catch(c){}return r}}if(AmCharts.AmExport=AmCharts.Class({construct:function(t,e,i){this.DEBUG=!1,this.chart=t,this.canvas=null,this.svgs=[],this.userCFG=e,this.buttonIcon="export.png",this.exportPNG=!0,this.exportSVG=this.exportJPG=this.exportPDF=!1,this.top=this.right=0,this.buttonRollOverColor="#EFEFEF",this.textRollOverColor="#CC0000",this.buttonTitle="Save chart as an image",this.buttonAlpha=.75,this.imageFileName="amChart",this.imageBackgroundColor="#FFFFFF",i&&this.init()},toCoordinate:function(t){return void 0===t?"auto":-1!=String(t).indexOf("%")?t:t+"px"},init:function(){var t=this,e=[];t.exportPNG&&e.push("png"),t.exportPDF&&e.push("pdf"),t.exportJPG&&e.push("jpg"),t.exportSVG&&e.push("svg");var i=[];if(1==e.length)i.push({format:e[0],iconTitle:t.buttonTitle,icon:t.chart.pathToImages+t.buttonIcon});else if(1<e.length){for(var n=[],r=0;r<e.length;r++)n.push({format:e[r],title:e[r].toUpperCase()});i.push({onclick:function(){},icon:t.chart.pathToImages+t.buttonIcon,items:n})}e=t.color,void 0===e&&(e=t.chart.color),n=t.buttonColor,void 0===n&&(n="transparent"),t.cfg={menuTop:t.toCoordinate(t.top),menuLeft:t.toCoordinate(t.left),menuRight:t.toCoordinate(t.right),menuBottom:t.toCoordinate(t.bottom),menuItems:i,menuItemStyle:{backgroundColor:n,opacity:t.buttonAlpha,rollOverBackgroundColor:t.buttonRollOverColor,color:e,rollOverColor:t.textRollOverColor,paddingTop:"6px",paddingRight:"6px",paddingBottom:"6px",paddingLeft:"6px",marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",textAlign:"left",textDecoration:"none",fontFamily:t.chart.fontFamily,fontSize:t.chart.fontSize+"px"},menuItemOutput:{backgroundColor:t.imageBackgroundColor,fileName:t.imageFileName,format:"png",output:"dataurlnewwindow",render:"browser",dpi:90,onclick:function(t,e,i){i.preventDefault(),t.output(e)}},removeImagery:!0},t.processing={buffer:[],drawn:0,timer:0},"undefined"!=typeof window.canvg&&"undefined"!=typeof window.RGBColor&&(t.cfg.menuItemOutput.render="canvg"),"undefined"!=typeof window.saveAs&&(t.cfg.menuItemOutput.output="save"),AmCharts.isIE&&10>AmCharts.IEversion&&(t.cfg.menuItemOutput.output="dataurlnewwindow"),(i=t.userCFG)&&(i.menuItemOutput=AmCharts.extend(t.cfg.menuItemOutput,i.menuItemOutput||{}),i.menuItemStyle=AmCharts.extend(t.cfg.menuItemStyle,i.menuItemStyle||{}),t.cfg=AmCharts.extend(t.cfg,i)),t.chart.AmExport=t,t.chart.addListener("rendered",function(){t.setup()}),t.DEBUG&&(window.AmExport=t)},log:function(){console.log("AmExport: ",arguments)},setup:function(){10==this.DEBUG&&this.log("SETUP START"),!AmCharts.isIE||AmCharts.isIE&&9<AmCharts.IEversion?(this.generateButtons(),10==this.DEBUG&&this.log("SETUP END")):10==this.DEBUG&&this.log("< IE10 NOT SUPPORTED")},generateBinaryArray:function(t){for(var e,i,n=t.length,r=new Uint8Array(n/4*3|0),a=0,s=0,o=[0,0],l=0,h=0,u=new Uint8Array([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]);n--;)i=t.charCodeAt(a++),e=u[i-43],255!==e&&void 0!==e&&(o[1]=o[0],o[0]=i,h=h<<6|e,l++,4===l&&(r[s++]=h>>>16,61!==o[1]&&(r[s++]=h>>>8),61!==o[0]&&(r[s++]=h),l=0));return r},generateBlob:function(t,e){var i="image/svg+xml"!=e?t.indexOf(",")+1:0,n=t.substring(0,i),r=t,a=new Blob;return-1!=n.indexOf("base64")&&(r=this.generateBinaryArray(t.substring(i))),AmCharts.isIE&&10>AmCharts.IEversion?(a.data=r,a.size=r.length,a.type=e,a.encoding="base64"):a=new Blob([r],{type:e}),a},generatePDF:function(t){var e={output:function(){return""}},i=this.canvas.toDataURL("image/jpeg"),n=25.4*this.canvas.width/t.dpi;return t=25.4*this.canvas.height/t.dpi,window.jsPDF?(e=new jsPDF,e.addImage?e.addImage(i,"JPEG",0,0,n,t):alert("Missing jsPDF plugin; Please add the 'addImage' plugin.")):alert("Missing jsPDF lib; Don't forget to add the addImage plugin."),e},output:function(t,e){var i=this;return t=AmCharts.extend(AmCharts.extend({},i.cfg.menuItemOutput),t||{}),i.chart.prepareForExport&&i.chart.prepareForExport(),i.generateOutput(t,function(){var n,r=null;10==i.DEBUG&&i.log("OUTPUT",t.format),"image/svg+xml"==t.format||"svg"==t.format?(r=i.generateSVG(),n=i.generateBlob(r,"image/svg+xml"),"save"==t.output?saveAs(n,t.fileName+".svg"):"datastring"==t.output||"datauristring"==t.output||"dataurlstring"==t.output?n="data:image/svg+xml;base64,"+btoa(r):"dataurlnewwindow"==t.output?window.open("data:image/svg+xml;base64,"+btoa(r)):"datauri"==t.output||"dataurl"==t.output?location.href="data:image/svg+xml;base64,"+btoa(r):"datastream"==t.output&&(location.href="data:image/octet-stream;base64,"+r),e&&e.apply(i,[n])):"application/pdf"==t.format||"pdf"==t.format?(r=i.generatePDF(t).output("dataurlstring"),n=i.generateBlob(r,"application/pdf"),"save"==t.output?saveAs(n,t.fileName+".pdf"):"datastring"==t.output||"datauristring"==t.output||"dataurlstring"==t.output?n=r:"dataurlnewwindow"==t.output?window.open(r):"datauri"==t.output||"dataurl"==t.output?location.href=r:"datastream"==t.output&&(location.href=r.replace("application/pdf","application/octet-stream")),e&&e.apply(i,[n])):"image/png"==t.format||"png"==t.format?(r=i.canvas.toDataURL("image/png"),n=i.generateBlob(r,"image/png"),"save"==t.output?saveAs(n,t.fileName+".png"):"datastring"==t.output||"datauristring"==t.output||"dataurlstring"==t.output?n=r:"dataurlnewwindow"==t.output?window.open(r):"datauri"==t.output||"dataurl"==t.output?location.href=r:"datastream"==t.output&&(location.href=r.replace("image/png","image/octet-stream")),e&&e.apply(i,[n])):"image/jpeg"!=t.format&&"jpeg"!=t.format&&"jpg"!=t.format||(r=i.canvas.toDataURL("image/jpeg"),n=i.generateBlob(r,"image/jpeg"),"save"==t.output?saveAs(n,t.fileName+".jpg"):"datastring"==t.output||"datauristring"==t.output||"dataurlstring"==t.output?n=r:"dataurlnewwindow"==t.output?window.open(r):"datauri"==t.output||"dataurl"==t.output?location.href=r:"datastream"==t.output&&(location.href=r.replace("image/jpeg","image/octet-stream")),e&&e.apply(i,[n]))})},polifySVG:function(t){function e(t,e){for(var n=t.getElementsByTagName(e),r=n.length;r--;){if(i.cfg.removeImagery)n[r].parentNode.removeChild(n[r]);else{var a=document.createElement("img"),s=document.createElement("canvas"),o=s.getContext("2d");s.width=n[r].getAttribute("width"),s.height=n[r].getAttribute("height"),a.src=n[r].getAttribute("xlink:href"),a.width=n[r].getAttribute("width"),a.height=n[r].getAttribute("height");try{o.drawImage(a,0,0,a.width,a.height),datastring=s.toDataURL()}catch(l){throw datastring=a.src,i.log("Tainted canvas, reached browser CORS security; origin from imagery must be equal to the server!"),Error(l)}n[r].setAttribute("xlink:href",datastring)}10==i.DEBUG&&i.log("POLIFIED",n[r])}}var i=this;return 0==AmCharts.IEversion&&(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.cfg.removeImagery||t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink")),10==i.DEBUG&&i.log("POLIFIED",t),e(t,"pattern"),e(t,"image"),i.svgs.push(t),t},generateSVG:function(){var t=document.createElement("svg");t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");for(var e=0;e<this.processing.buffer.length;e++){var i=document.createElement("g"),n=this.processing.buffer[e];n[0].setAttribute("xmlns","http://www.w3.org/2000/svg"),n[0].setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),i.setAttribute("transform","translate("+n[1].x+","+n[1].y+")"),i.appendChild(n[0]),t.appendChild(i)}return(new XMLSerializer).serializeToString(t)},generateOutput:function(t,e){function i(){var r,a,l;return n.processing.buffer.length==n.processing.drawn||"svg"==t.format?(10==n.DEBUG&&n.log("END DRAWING"),e()):(10==n.DEBUG&&n.log("DRAW",n.processing.drawn+1,"OF",n.processing.buffer.length),a=n.processing.buffer[n.processing.drawn],l=(new XMLSerializer).serializeToString(a[0]),r=a[1],10==n.DEBUG&&n.log("SOURCE",l),void("browser"==t.render?(r=new Image,r.id=AmCharts.getUniqueId(),l="data:image/svg+xml;base64,"+btoa(l),r.onload=function(){o.drawImage(this,a[1].x,a[1].y),n.processing.drawn++,10==n.DEBUG&&n.log("ONLOAD",this),i()},r.onerror=function(){10==n.DEBUG&&n.log("ONERROR",this),o.drawImage(this,a[1].x,a[1].y),n.processing.drawn++,i()},r.src=l,10==n.DEBUG&&n.log("ADD",r),(r.complete||"undefined"==typeof r.complete||void 0===r.complete)&&(10==n.DEBUG&&n.log("FORCE ONLOAD",r),r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",r.src=l)):"canvg"==t.render&&canvg(s,l,{offsetX:r.x,offsetY:r.y,ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,renderCallback:function(){n.processing.drawn++,i()}})))}for(var n=this,r=[],a=[],s=document.createElement("canvas"),o=s.getContext("2d"),l={y:0,x:0},r=n.chart.div.getElementsByTagName("svg"),h=0;h<r.length;h++)a.push(r[h]);for(n.chart.legend&&"outside"==n.chart.legend.position&&(n.chart.legend.container.container.externalLegend=!0,a.push(n.chart.legend.container.container),"left"==n.cfg.legendPosition?l.x=n.chart.legend.div.offsetWidth:"top"==n.cfg.legendPosition?l.y=n.chart.legend.div.offsetHeight:"object"==typeof n.cfg.legendPosition&&(l.y=n.cfg.legendPosition.chartTop,l.x=n.cfg.legendPosition.chartLeft)),n.processing.buffer=[],n.processing.drawn=0,n.canvas=s,n.svgs=[],10==n.DEBUG&&n.log("START EXPORT"),10==n.DEBUG&&n.log("START BUFFERING"),h=0;h<a.length;h++){var r=a[h].parentNode,u=Number(r.style.left.slice(0,-2)),c=Number(r.style.top.slice(0,-2)),d=n.polifySVG(a[h].cloneNode(!0)),f=AmCharts.extend({},l);a[h].externalLegend?"right"==n.cfg.legendPosition?(l.y=0,l.x=n.chart.divRealWidth):"bottom"==n.cfg.legendPosition?l.y=c?c:l.y:"object"==typeof n.cfg.legendPosition?(l.x=n.cfg.legendPosition.left,l.y=n.cfg.legendPosition.top):(l.x=0,l.y=0):"relative"==r.style.position?(l.x=u?u:l.x,l.y=c?c:l.y):(l.x=u,l.y=c),n.processing.buffer.push([d,AmCharts.extend({},l)]),c&&u?l=f:l.y+=c?0:r.offsetHeight,10==n.DEBUG&&n.log("BUFFERED",a[h],l)}return 10==n.DEBUG&&n.log("END BUFFERING"),10==n.DEBUG&&n.log("START DRAWING",t.render),10==n.DEBUG&&n.log("FILL BACKGROUND"),s.id=AmCharts.getUniqueId(),s.width=n.chart.divRealWidth,s.height=n.chart.divRealHeight,n.chart.legend&&"outside"==n.chart.legend.position&&(-1!=["left","right"].indexOf(n.cfg.legendPosition)?s.width+=n.chart.legend.div.offsetWidth:"object"==typeof n.cfg.legendPosition?(s.width+=n.cfg.legendPosition.width,s.height+=n.cfg.legendPosition.height):s.height+=n.chart.legend.div.offsetHeight),a=!1,n.chart.periodSelector&&(-1!=["left","right"].indexOf(n.chart.periodSelector.position)?(s.width-=n.chart.periodSelector.div.offsetWidth+16,a=!0):s.height-=n.chart.periodSelector.div.offsetHeight),n.chart.dataSetSelector&&(-1!=["left","right"].indexOf(n.chart.dataSetSelector.position)?a||(s.width-=n.chart.dataSetSelector.div.offsetWidth+16):s.height-=n.chart.dataSetSelector.div.offsetHeight),(t.backgroundColor||"image/jpeg"==t.format)&&(o.fillStyle=t.backgroundColor||"#FFFFFF",o.fillRect(0,0,s.width,s.height)),i()},generateButtons:function(){function t(n){var r=document.createElement("ul");r.setAttribute("style","list-style: none; margin: 0; padding: 0;");for(var a=0;a<n.length;a++){var s=document.createElement("li"),o=document.createElement("img"),l=document.createElement("a"),h=n[a],u=null,c=AmCharts.extend(AmCharts.extend({},e.cfg.menuItemStyle),n[a]),h=AmCharts.extend(AmCharts.extend({},e.cfg.menuItemOutput),h);h.icon&&(o.alt="",o.src=h.icon,o.setAttribute("style","margin: 0 auto;border: none;outline: none"),h.iconTitle&&(o.title=h.iconTitle),l.appendChild(o)),l.href="#",h.title&&(o.setAttribute("style","margin: 0px 5px;"),l.innerHTML+=h.title),l.setAttribute("style","display: block;"),AmCharts.extend(l.style,c),l.onclick=h.onclick.bind(l,e,h),s.appendChild(l),h.items&&(u=t(h.items),s.appendChild(u),s.onmouseover=function(){u.style.display="block"},s.onmouseout=function(){u.style.display="none"},u.style.display="none"),r.appendChild(s),l.onmouseover=function(){this.style.backgroundColor=c.rollOverBackgroundColor,this.style.color=c.rollOverColor,this.style.borderColor=c.rollOverBorderColor},l.onmouseout=function(){this.style.backgroundColor=c.backgroundColor,this.style.color=c.color,this.style.borderColor=c.borderColor}}return i++,10==e.DEBUG&&e.log("MENU",r),r}var e=this,i=0;e.div?(div=e.div,div.innerHTML=""):(div=document.createElement("div"),e.div=div),div.setAttribute("style","position: absolute;top:"+e.cfg.menuTop+";right:"+e.cfg.menuRight+";bottom:"+e.cfg.menuBottom+";left:"+e.cfg.menuLeft+";"),div.setAttribute("class","amExportButton"),div.appendChild(t(e.cfg.menuItems)),e.chart.containerDiv.appendChild(div)}}),function(){function t(){var t={FRAMERATE:30,MAX_VIRTUAL_PIXELS:3e4,init:function(e){var i=0;t.UniqueId=function(){return i++,"canvg"+i},t.Definitions={},t.Styles={},t.Animations=[],t.Images=[],t.ctx=e,t.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}}};return t.init(),t.ImagesLoaded=function(){for(var e=0;e<t.Images.length;e++)if(!t.Images[e].loaded)return!1;return!0},t.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},t.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},t.ajax=function(t){var e;return(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))?(e.open("GET",t,!1),e.send(null),e.responseText):null},t.parseXml=function(t){if(window.DOMParser)return(new DOMParser).parseFromString(t,"text/xml");t=t.replace(/<!DOCTYPE svg[^>]*>/,"");var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},t.Property=function(t,e){this.name=t,this.value=e},t.Property.prototype.getValue=function(){return this.value},t.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},t.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},t.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},t.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},t.Property.prototype.addOpacity=function(e){var i=this.value;if(null!=e&&""!=e&&"string"==typeof this.value){var n=new RGBColor(this.value);n.ok&&(i="rgba("+n.r+", "+n.g+", "+n.b+", "+e+")")}return new t.Property(this.name,i)},t.Property.prototype.getDefinition=function(){var e=this.value.match(/#([^\)'"]+)/);return e&&(e=e[1]),e||(e=this.value),t.Definitions[e]},t.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},t.Property.prototype.getFillStyleDefinition=function(e,i){var n=this.getDefinition();if(null!=n&&n.createGradient)return n.createGradient(t.ctx,e,i);if(null!=n&&n.createPattern){if(n.getHrefAttribute().hasValue()){var r=n.attribute("patternTransform"),n=n.getHrefAttribute().getDefinition();r.hasValue()&&(n.attribute("patternTransform",!0).value=r.value)}return n.createPattern(t.ctx,e)}return null},t.Property.prototype.getDPI=function(t){return 96},t.Property.prototype.getEM=function(e){var i=12,n=new t.Property("fontSize",t.Font.Parse(t.ctx.font).fontSize);return n.hasValue()&&(i=n.toPixels(e)),i},t.Property.prototype.getUnits=function(){return(this.value+"").replace(/[0-9\.\-]/g,"")},t.Property.prototype.toPixels=function(e,i){if(!this.hasValue())return 0;var n=this.value+"";return n.match(/em$/)?this.numValue()*this.getEM(e):n.match(/ex$/)?this.numValue()*this.getEM(e)/2:n.match(/px$/)?this.numValue():n.match(/pt$/)?this.numValue()*this.getDPI(e)*(1/72):n.match(/pc$/)?15*this.numValue():n.match(/cm$/)?this.numValue()*this.getDPI(e)/2.54:n.match(/mm$/)?this.numValue()*this.getDPI(e)/25.4:n.match(/in$/)?this.numValue()*this.getDPI(e):n.match(/%$/)?this.numValue()*t.ViewPort.ComputeSize(e):(n=this.numValue(),i&&1>n?n*t.ViewPort.ComputeSize(e):n)},t.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():(t.match(/ms$/),this.numValue())},t.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},t.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(e,i,n,r,a,s){return s=null!=s?this.Parse(s):this.CreateFont("","","","","",t.ctx.font),{fontFamily:a||s.fontFamily,fontSize:r||s.fontSize,fontStyle:e||s.fontStyle,fontWeight:n||s.fontWeight,fontVariant:i||s.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var e=this;this.Parse=function(i){var n={};i=t.trim(t.compressSpaces(i||"")).split(" ");for(var r=!1,a=!1,s=!1,o=!1,l="",h=0;h<i.length;h++)a||-1==e.Styles.indexOf(i[h])?o||-1==e.Variants.indexOf(i[h])?s||-1==e.Weights.indexOf(i[h])?r?"inherit"!=i[h]&&(l+=i[h]):("inherit"!=i[h]&&(n.fontSize=i[h].split("/")[0]),a=o=s=r=!0):("inherit"!=i[h]&&(n.fontWeight=i[h]),a=o=s=!0):("inherit"!=i[h]&&(n.fontVariant=i[h]),a=o=!0):("inherit"!=i[h]&&(n.fontStyle=i[h]),a=!0);return""!=l&&(n.fontFamily=l),n}},t.ToNumberArray=function(e){e=t.trim(t.compressSpaces((e||"").replace(/,/g," "))).split(" ");for(var i=0;i<e.length;i++)e[i]=parseFloat(e[i]);return e},t.Point=function(t,e){this.x=t,this.y=e},t.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},t.Point.prototype.applyTransform=function(t){var e=this.x*t[1]+this.y*t[3]+t[5];this.x=this.x*t[0]+this.y*t[2]+t[4],this.y=e},t.CreatePoint=function(e){return e=t.ToNumberArray(e),new t.Point(e[0],e[1])},t.CreatePath=function(e){e=t.ToNumberArray(e);for(var i=[],n=0;n<e.length;n+=2)i.push(new t.Point(e[n],e[n+1]));return i},t.BoundingBox=function(t,e,n,r){this.y2=this.x2=this.y1=this.x1=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x2=this.x1=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y2=this.y1=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,i,n,r,a){i=t+2/3*(i-t),n=e+2/3*(n-e),this.addBezierCurve(t,e,i,i+1/3*(r-t),n,n+1/3*(a-e),r,a)},this.addBezierCurve=function(t,e,n,r,a,s,o,l){var h=[t,e],u=[n,r],c=[a,s],d=[o,l];for(this.addPoint(h[0],h[1]),this.addPoint(d[0],d[1]),i=0;1>=i;i++)t=function(t){return Math.pow(1-t,3)*h[i]+3*Math.pow(1-t,2)*t*u[i]+3*(1-t)*Math.pow(t,2)*c[i]+Math.pow(t,3)*d[i]},e=6*h[i]-12*u[i]+6*c[i],n=-3*h[i]+9*u[i]-9*c[i]+3*d[i],r=3*u[i]-3*h[i],0==n?0!=e&&(e=-r/e,e>0&&1>e&&(0==i&&this.addX(t(e)),1==i&&this.addY(t(e)))):(r=Math.pow(e,2)-4*r*n,0>r||(a=(-e+Math.sqrt(r))/(2*n),a>0&&1>a&&(0==i&&this.addX(t(a)),1==i&&this.addY(t(a))),e=(-e-Math.sqrt(r))/(2*n),e>0&&1>e&&(0==i&&this.addX(t(e)),1==i&&this.addY(t(e)))))},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,r)},t.Transform=function(e){var i=this;this.Type={},this.Type.translate=function(e){this.p=t.CreatePoint(e),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(e){e=t.ToNumberArray(e),this.angle=new t.Property("angle",e[0]),this.cx=e[1]||0,this.cy=e[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(e){this.p=t.CreatePoint(e),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(e){this.m=t.ToNumberArray(e),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(e){this.base=i.Type.matrix,this.base(e),this.angle=new t.Property("angle",e)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=i.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=i.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;e>=0;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)},e=t.trim(t.compressSpaces(e)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/);for(var n=0;n<e.length;n++){var r=t.trim(e[n].split("(")[0]),a=e[n].split("(")[1].replace(")",""),a=new this.Type[r](a);a.type=r,this.transforms.push(a)}},t.AspectRatio=function(e,i,n,r,a,s,o,l,h,u){i=t.compressSpaces(i),i=i.replace(/^defer\s/,"");var c=i.split(" ")[0]||"xMidYMid";i=i.split(" ")[1]||"meet";var d=n/r,f=a/s,p=Math.min(d,f),m=Math.max(d,f);"meet"==i&&(r*=p,s*=p),"slice"==i&&(r*=m,s*=m),h=new t.Property("refX",h),u=new t.Property("refY",u),h.hasValue()&&u.hasValue()?e.translate(-p*h.toPixels("x"),-p*u.toPixels("y")):(c.match(/^xMid/)&&("meet"==i&&p==f||"slice"==i&&m==f)&&e.translate(n/2-r/2,0),c.match(/YMid$/)&&("meet"==i&&p==d||"slice"==i&&m==d)&&e.translate(0,a/2-s/2),c.match(/^xMax/)&&("meet"==i&&p==f||"slice"==i&&m==f)&&e.translate(n-r,0),c.match(/YMax$/)&&("meet"==i&&p==d||"slice"==i&&m==d)&&e.translate(0,a-s)),"none"==c?e.scale(d,f):"meet"==i?e.scale(p,p):"slice"==i&&e.scale(m,m),e.translate(null==o?0:-o,null==l?0:-l)},t.Element={},t.EmptyProperty=new t.Property("EMPTY",""),t.Element.ElementBase=function(e){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(e,i){var n=this.attributes[e];return null!=n?n:(1==i&&(n=new t.Property(e,""),this.attributes[e]=n),n||t.EmptyProperty)},this.getHrefAttribute=function(){for(var e in this.attributes)if(e.match(/:href$/))return this.attributes[e];return t.EmptyProperty},this.style=function(e,i){var n=this.styles[e];if(null!=n)return n;var r=this.attribute(e);return null!=r&&r.hasValue()?this.styles[e]=r:(r=this.parent,null!=r&&(r=r.style(e),null!=r&&r.hasValue())?r:(1==i&&(n=new t.Property(e,""),this.styles[e]=n),n||t.EmptyProperty))},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.attribute("visibility").value){if(t.save(),this.attribute("mask").hasValue()){var e=this.attribute("mask").getDefinition();null!=e&&e.apply(t,this)}else this.style("filter").hasValue()?(e=this.style("filter").getDefinition(),null!=e&&e.apply(t,this)):(this.setContext(t),this.renderChildren(t),this.clearContext(t));t.restore()}},this.setContext=function(t){},this.clearContext=function(t){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(e,i){var n=e;i&&(n=t.CreateElement(e)),n.parent=this,this.children.push(n)},null!=e&&1==e.nodeType){for(var i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];1==n.nodeType&&this.addChild(n,!0),this.captureTextNodes&&3==n.nodeType&&""!=t.trim(t.compressSpaces(n.nodeValue||n.text||""))&&this.addChild(new t.Element.tspan(n),!1)}for(i=0;i<e.attributes.length;i++)n=e.attributes[i],this.attributes[n.nodeName]=new t.Property(n.nodeName,n.nodeValue);if(n=t.Styles[e.nodeName],null!=n)for(var r in n)this.styles[r]=n[r];if(this.attribute("class").hasValue())for(var i=t.compressSpaces(this.attribute("class").value).split(" "),a=0;a<i.length;a++){if(n=t.Styles["."+i[a]],null!=n)for(r in n)this.styles[r]=n[r];if(n=t.Styles[e.nodeName+"."+i[a]],null!=n)for(r in n)this.styles[r]=n[r]}if(this.attribute("id").hasValue()&&(n=t.Styles["#"+this.attribute("id").value],null!=n))for(r in n)this.styles[r]=n[r];if(this.attribute("style").hasValue())for(n=this.attribute("style").value.split(";"),i=0;i<n.length;i++)""!=t.trim(n[i])&&(e=n[i].split(":"),r=t.trim(e[0]),e=t.trim(e[1]),this.styles[r]=new t.Property(r,e));this.attribute("id").hasValue()&&null==t.Definitions[this.attribute("id").value]&&(t.Definitions[this.attribute("id").value]=this)}},t.Element.RenderedElementBase=function(e){this.base=t.Element.ElementBase,this.base(e),this.setContext=function(e){if(this.style("fill").isUrlDefinition()){var i=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=i&&(e.fillStyle=i)}else this.style("fill").hasValue()&&(i=this.style("fill"),"currentColor"==i.value&&(i.value=this.style("color").value),e.fillStyle="none"==i.value?"rgba(0,0,0,0)":i.value);this.style("fill-opacity").hasValue()&&(i=new t.Property("fill",e.fillStyle),i=i.addOpacity(this.style("fill-opacity").value),e.fillStyle=i.value),this.style("stroke").isUrlDefinition()?(i=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity")),null!=i&&(e.strokeStyle=i)):this.style("stroke").hasValue()&&(i=this.style("stroke"),"currentColor"==i.value&&(i.value=this.style("color").value),e.strokeStyle="none"==i.value?"rgba(0,0,0,0)":i.value),this.style("stroke-opacity").hasValue()&&(i=new t.Property("stroke",e.strokeStyle),i=i.addOpacity(this.style("stroke-opacity").value),e.strokeStyle=i.value),this.style("stroke-width").hasValue()&&(i=this.style("stroke-width").toPixels(),e.lineWidth=0==i?.001:i),this.style("stroke-linecap").hasValue()&&(e.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(e.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(e.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&(i=t.ToNumberArray(this.style("stroke-dasharray").value),"undefined"!=typeof e.setLineDash?e.setLineDash(i):"undefined"!=typeof e.webkitLineDash?e.webkitLineDash=i:"undefined"!=typeof e.mozDash&&(e.mozDash=i),i=this.style("stroke-dashoffset").numValueOrDefault(1),"undefined"!=typeof e.lineDashOffset?e.lineDashOffset=i:"undefined"!=typeof e.webkitLineDashOffset?e.webkitLineDashOffset=i:"undefined"!=typeof e.mozDashOffset&&(e.mozDashOffset=i)),
"undefined"!=typeof e.font&&(e.font=t.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue()&&new t.Transform(this.attribute("transform").value).apply(e),this.style("clip-path").hasValue()&&(i=this.style("clip-path").getDefinition(),null!=i&&i.apply(e)),this.style("opacity").hasValue()&&(e.globalAlpha=this.style("opacity").numValue())}},t.Element.RenderedElementBase.prototype=new t.Element.ElementBase,t.Element.PathElementBase=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.path=function(e){return null!=e&&e.beginPath(),new t.BoundingBox},this.renderChildren=function(e){this.path(e),t.Mouse.checkPath(this,e),""!=e.fillStyle&&(this.attribute("fill-rule").hasValue()?e.fill(this.attribute("fill-rule").value):e.fill()),""!=e.strokeStyle&&e.stroke();var i=this.getMarkers();if(null!=i){if(this.style("marker-start").isUrlDefinition()){var n=this.style("marker-start").getDefinition();n.render(e,i[0][0],i[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var n=this.style("marker-mid").getDefinition(),r=1;r<i.length-1;r++)n.render(e,i[r][0],i[r][1]);this.style("marker-end").isUrlDefinition()&&(n=this.style("marker-end").getDefinition(),n.render(e,i[i.length-1][0],i[i.length-1][1]))}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},t.Element.PathElementBase.prototype=new t.Element.RenderedElementBase,t.Element.svg=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseClearContext=this.clearContext,this.clearContext=function(e){this.baseClearContext(e),t.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,this.baseSetContext(e),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),e.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var i=t.ViewPort.width(),n=t.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){var i=this.attribute("width").toPixels("x"),n=this.attribute("height").toPixels("y"),r=0,a=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(r=-this.attribute("refX").toPixels("x"),a=-this.attribute("refY").toPixels("y")),e.beginPath(),e.moveTo(r,a),e.lineTo(i,a),e.lineTo(i,n),e.lineTo(r,n),e.closePath(),e.clip()}if(t.ViewPort.SetCurrent(i,n),this.attribute("viewBox").hasValue()){var r=t.ToNumberArray(this.attribute("viewBox").value),a=r[0],s=r[1],i=r[2],n=r[3];t.AspectRatio(e,this.attribute("preserveAspectRatio").value,t.ViewPort.width(),i,t.ViewPort.height(),n,a,s,this.attribute("refX").value,this.attribute("refY").value),t.ViewPort.RemoveCurrent(),t.ViewPort.SetCurrent(r[2],r[3])}}},t.Element.svg.prototype=new t.Element.RenderedElementBase,t.Element.rect=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var i=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y"),s=this.attribute("rx").toPixels("x"),o=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(o=s),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(s=o),s=Math.min(s,r/2),o=Math.min(o,a/2),null!=e&&(e.beginPath(),e.moveTo(i+s,n),e.lineTo(i+r-s,n),e.quadraticCurveTo(i+r,n,i+r,n+o),e.lineTo(i+r,n+a-o),e.quadraticCurveTo(i+r,n+a,i+r-s,n+a),e.lineTo(i+s,n+a),e.quadraticCurveTo(i,n+a,i,n+a-o),e.lineTo(i,n+o),e.quadraticCurveTo(i,n,i+s,n),e.closePath()),new t.BoundingBox(i,n,i+r,n+a)}},t.Element.rect.prototype=new t.Element.PathElementBase,t.Element.circle=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var i=this.attribute("cx").toPixels("x"),n=this.attribute("cy").toPixels("y"),r=this.attribute("r").toPixels();return null!=e&&(e.beginPath(),e.arc(i,n,r,0,2*Math.PI,!0),e.closePath()),new t.BoundingBox(i-r,n-r,i+r,n+r)}},t.Element.circle.prototype=new t.Element.PathElementBase,t.Element.ellipse=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var i=4*((Math.sqrt(2)-1)/3),n=this.attribute("rx").toPixels("x"),r=this.attribute("ry").toPixels("y"),a=this.attribute("cx").toPixels("x"),s=this.attribute("cy").toPixels("y");return null!=e&&(e.beginPath(),e.moveTo(a,s-r),e.bezierCurveTo(a+i*n,s-r,a+n,s-i*r,a+n,s),e.bezierCurveTo(a+n,s+i*r,a+i*n,s+r,a,s+r),e.bezierCurveTo(a-i*n,s+r,a-n,s+i*r,a-n,s),e.bezierCurveTo(a-n,s-i*r,a-i*n,s-r,a,s-r),e.closePath()),new t.BoundingBox(a-n,s-r,a+n,s+r)}},t.Element.ellipse.prototype=new t.Element.PathElementBase,t.Element.line=function(e){this.base=t.Element.PathElementBase,this.base(e),this.getPoints=function(){return[new t.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new t.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(e){var i=this.getPoints();return null!=e&&(e.beginPath(),e.moveTo(i[0].x,i[0].y),e.lineTo(i[1].x,i[1].y)),new t.BoundingBox(i[0].x,i[0].y,i[1].x,i[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},t.Element.line.prototype=new t.Element.PathElementBase,t.Element.polyline=function(e){this.base=t.Element.PathElementBase,this.base(e),this.points=t.CreatePath(this.attribute("points").value),this.path=function(e){var i=new t.BoundingBox(this.points[0].x,this.points[0].y);null!=e&&(e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y));for(var n=1;n<this.points.length;n++)i.addPoint(this.points[n].x,this.points[n].y),null!=e&&e.lineTo(this.points[n].x,this.points[n].y);return i},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},t.Element.polyline.prototype=new t.Element.PathElementBase,t.Element.polygon=function(e){this.base=t.Element.polyline,this.base(e),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},t.Element.polygon.prototype=new t.Element.polyline,t.Element.path=function(e){this.base=t.Element.PathElementBase,this.base(e),e=this.attribute("d").value,e=e.replace(/,/gm," "),e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),e=e.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),e=e.replace(/([0-9])([+\-])/gm,"$1 $2"),e=e.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),e=e.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),e=t.compressSpaces(e),e=t.trim(e),this.PathParser=new function(e){this.tokens=e.split(" "),this.reset=function(){this.i=-1,this.previousCommand=this.command="",this.start=new t.Point(0,0),this.control=new t.Point(0,0),this.current=new t.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var e=new t.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(e)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t},this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new t.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,i){null!=i&&0<this.angles.length&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(i)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(e),this.path=function(e){var i=this.PathParser;i.reset();var n=new t.BoundingBox;for(null!=e&&e.beginPath();!i.isEnd();)switch(i.nextCommand(),i.command){case"M":case"m":var r=i.getAsCurrentPoint();for(i.addMarker(r),n.addPoint(r.x,r.y),null!=e&&e.moveTo(r.x,r.y),i.start=i.current;!i.isCommandOrEnd();)r=i.getAsCurrentPoint(),i.addMarker(r,i.start),n.addPoint(r.x,r.y),null!=e&&e.lineTo(r.x,r.y);break;case"L":case"l":for(;!i.isCommandOrEnd();){var a=i.current,r=i.getAsCurrentPoint();i.addMarker(r,a),n.addPoint(r.x,r.y),null!=e&&e.lineTo(r.x,r.y)}break;case"H":case"h":for(;!i.isCommandOrEnd();)r=new t.Point((i.isRelativeCommand()?i.current.x:0)+i.getScalar(),i.current.y),i.addMarker(r,i.current),i.current=r,n.addPoint(i.current.x,i.current.y),null!=e&&e.lineTo(i.current.x,i.current.y);break;case"V":case"v":for(;!i.isCommandOrEnd();)r=new t.Point(i.current.x,(i.isRelativeCommand()?i.current.y:0)+i.getScalar()),i.addMarker(r,i.current),i.current=r,n.addPoint(i.current.x,i.current.y),null!=e&&e.lineTo(i.current.x,i.current.y);break;case"C":case"c":for(;!i.isCommandOrEnd();){var s=i.current,a=i.getPoint(),o=i.getAsControlPoint(),r=i.getAsCurrentPoint();i.addMarker(r,o,a),n.addBezierCurve(s.x,s.y,a.x,a.y,o.x,o.y,r.x,r.y),null!=e&&e.bezierCurveTo(a.x,a.y,o.x,o.y,r.x,r.y)}break;case"S":case"s":for(;!i.isCommandOrEnd();)s=i.current,a=i.getReflectedControlPoint(),o=i.getAsControlPoint(),r=i.getAsCurrentPoint(),i.addMarker(r,o,a),n.addBezierCurve(s.x,s.y,a.x,a.y,o.x,o.y,r.x,r.y),null!=e&&e.bezierCurveTo(a.x,a.y,o.x,o.y,r.x,r.y);break;case"Q":case"q":for(;!i.isCommandOrEnd();)s=i.current,o=i.getAsControlPoint(),r=i.getAsCurrentPoint(),i.addMarker(r,o,o),n.addQuadraticCurve(s.x,s.y,o.x,o.y,r.x,r.y),null!=e&&e.quadraticCurveTo(o.x,o.y,r.x,r.y);break;case"T":case"t":for(;!i.isCommandOrEnd();)s=i.current,o=i.getReflectedControlPoint(),i.control=o,r=i.getAsCurrentPoint(),i.addMarker(r,o,o),n.addQuadraticCurve(s.x,s.y,o.x,o.y,r.x,r.y),null!=e&&e.quadraticCurveTo(o.x,o.y,r.x,r.y);break;case"A":case"a":for(;!i.isCommandOrEnd();){var s=i.current,l=i.getScalar(),h=i.getScalar(),a=i.getScalar()*(Math.PI/180),u=i.getScalar(),o=i.getScalar(),r=i.getAsCurrentPoint(),c=new t.Point(Math.cos(a)*(s.x-r.x)/2+Math.sin(a)*(s.y-r.y)/2,-Math.sin(a)*(s.x-r.x)/2+Math.cos(a)*(s.y-r.y)/2),d=Math.pow(c.x,2)/Math.pow(l,2)+Math.pow(c.y,2)/Math.pow(h,2);d>1&&(l*=Math.sqrt(d),h*=Math.sqrt(d)),u=(u==o?-1:1)*Math.sqrt((Math.pow(l,2)*Math.pow(h,2)-Math.pow(l,2)*Math.pow(c.y,2)-Math.pow(h,2)*Math.pow(c.x,2))/(Math.pow(l,2)*Math.pow(c.y,2)+Math.pow(h,2)*Math.pow(c.x,2))),isNaN(u)&&(u=0);var f=new t.Point(u*l*c.y/h,u*-h*c.x/l),s=new t.Point((s.x+r.x)/2+Math.cos(a)*f.x-Math.sin(a)*f.y,(s.y+r.y)/2+Math.sin(a)*f.x+Math.cos(a)*f.y),p=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},m=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(p(t)*p(e))},g=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(m(t,e))},u=g([1,0],[(c.x-f.x)/l,(c.y-f.y)/h]),d=[(c.x-f.x)/l,(c.y-f.y)/h],f=[(-c.x-f.x)/l,(-c.y-f.y)/h],c=g(d,f);-1>=m(d,f)&&(c=Math.PI),1<=m(d,f)&&(c=0),d=1-o?1:-1,f=u+c/2*d,g=new t.Point(s.x+l*Math.cos(f),s.y+h*Math.sin(f)),i.addMarkerAngle(g,f-d*Math.PI/2),i.addMarkerAngle(r,f-d*Math.PI),n.addPoint(r.x,r.y),null!=e&&(m=l>h?l:h,r=l>h?1:l/h,l=l>h?h/l:1,e.translate(s.x,s.y),e.rotate(a),e.scale(r,l),e.arc(0,0,m,u,u+c,1-o),e.scale(1/r,1/l),e.rotate(-a),e.translate(-s.x,-s.y))}break;case"Z":case"z":null!=e&&e.closePath(),i.current=i.start}return n},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),i=[],n=0;n<t.length;n++)i.push([t[n],e[n]]);return i}},t.Element.path.prototype=new t.Element.PathElementBase,t.Element.pattern=function(e){this.base=t.Element.ElementBase,this.base(e),this.createPattern=function(e,i){var n=this.attribute("width").toPixels("x",!0),r=this.attribute("height").toPixels("y",!0),a=new t.Element.svg;a.attributes.viewBox=new t.Property("viewBox",this.attribute("viewBox").value),a.attributes.width=new t.Property("width",n+"px"),a.attributes.height=new t.Property("height",r+"px"),a.attributes.transform=new t.Property("transform",this.attribute("patternTransform").value),a.children=this.children;var s=document.createElement("canvas");for(s.width=n,s.height=r,n=s.getContext("2d"),this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&n.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0)),r=-1;1>=r;r++)for(var o=-1;1>=o;o++)n.save(),n.translate(r*s.width,o*s.height),a.render(n),n.restore();return e.createPattern(s,"repeat")}},t.Element.pattern.prototype=new t.Element.ElementBase,t.Element.marker=function(e){this.base=t.Element.ElementBase,this.base(e),this.baseRender=this.render,this.render=function(e,i,n){e.translate(i.x,i.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(n),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(e.lineWidth,e.lineWidth),e.save();var r=new t.Element.svg;r.attributes.viewBox=new t.Property("viewBox",this.attribute("viewBox").value),r.attributes.refX=new t.Property("refX",this.attribute("refX").value),r.attributes.refY=new t.Property("refY",this.attribute("refY").value),r.attributes.width=new t.Property("width",this.attribute("markerWidth").value),r.attributes.height=new t.Property("height",this.attribute("markerHeight").value),r.attributes.fill=new t.Property("fill",this.attribute("fill").valueOrDefault("black")),r.attributes.stroke=new t.Property("stroke",this.attribute("stroke").valueOrDefault("none")),r.children=this.children,r.render(e),e.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(1/e.lineWidth,1/e.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(-n),e.translate(-i.x,-i.y)}},t.Element.marker.prototype=new t.Element.ElementBase,t.Element.defs=function(e){this.base=t.Element.ElementBase,this.base(e),this.render=function(t){}},t.Element.defs.prototype=new t.Element.ElementBase,t.Element.GradientBase=function(e){for(this.base=t.Element.ElementBase,this.base(e),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[],e=0;e<this.children.length;e++){var i=this.children[e];"stop"==i.type&&this.stops.push(i)}this.getGradient=function(){},this.createGradient=function(e,i,n){var r=this;this.getHrefAttribute().hasValue()&&(r=this.getHrefAttribute().getDefinition());var a=function(e){return n.hasValue()?new t.Property("color",e).addOpacity(n.value).value:e};if(e=this.getGradient(e,i),null==e)return a(r.stops[r.stops.length-1].color);for(i=0;i<r.stops.length;i++)e.addColorStop(r.stops[i].offset,a(r.stops[i].color));return this.attribute("gradientTransform").hasValue()?(r=t.ViewPort.viewPorts[0],a=new t.Element.rect,a.attributes.x=new t.Property("x",-t.MAX_VIRTUAL_PIXELS/3),a.attributes.y=new t.Property("y",-t.MAX_VIRTUAL_PIXELS/3),a.attributes.width=new t.Property("width",t.MAX_VIRTUAL_PIXELS),a.attributes.height=new t.Property("height",t.MAX_VIRTUAL_PIXELS),i=new t.Element.g,i.attributes.transform=new t.Property("transform",this.attribute("gradientTransform").value),i.children=[a],a=new t.Element.svg,a.attributes.x=new t.Property("x",0),a.attributes.y=new t.Property("y",0),a.attributes.width=new t.Property("width",r.width),a.attributes.height=new t.Property("height",r.height),a.children=[i],i=document.createElement("canvas"),i.width=r.width,i.height=r.height,r=i.getContext("2d"),r.fillStyle=e,a.render(r),r.createPattern(i,"no-repeat")):e}},t.Element.GradientBase.prototype=new t.Element.ElementBase,t.Element.linearGradient=function(e){this.base=t.Element.GradientBase,this.base(e),this.getGradient=function(t,e){var i=e.getBoundingBox();this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var n="objectBoundingBox"==this.gradientUnits?i.x()+i.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),r="objectBoundingBox"==this.gradientUnits?i.y()+i.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),a="objectBoundingBox"==this.gradientUnits?i.x()+i.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),i="objectBoundingBox"==this.gradientUnits?i.y()+i.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return n==a&&r==i?null:t.createLinearGradient(n,r,a,i)}},t.Element.linearGradient.prototype=new t.Element.GradientBase,t.Element.radialGradient=function(e){this.base=t.Element.GradientBase,this.base(e),this.getGradient=function(t,e){var i=e.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var n="objectBoundingBox"==this.gradientUnits?i.x()+i.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),r="objectBoundingBox"==this.gradientUnits?i.y()+i.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),a=n,s=r;return this.attribute("fx").hasValue()&&(a="objectBoundingBox"==this.gradientUnits?i.x()+i.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(s="objectBoundingBox"==this.gradientUnits?i.y()+i.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y")),i="objectBoundingBox"==this.gradientUnits?(i.width()+i.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels(),t.createRadialGradient(a,s,0,n,r,i)}},t.Element.radialGradient.prototype=new t.Element.GradientBase,t.Element.stop=function(e){this.base=t.Element.ElementBase,this.base(e),this.offset=this.attribute("offset").numValue(),0>this.offset&&(this.offset=0),1<this.offset&&(this.offset=1),e=this.style("stop-color"),this.style("stop-opacity").hasValue()&&(e=e.addOpacity(this.style("stop-opacity").value)),this.color=e.value},t.Element.stop.prototype=new t.Element.ElementBase,t.Element.AnimateBase=function(e){this.base=t.Element.ElementBase,this.base(e),t.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"!=this.attribute("repeatCount").value&&"indefinite"!=this.attribute("repeatDur").value)return"remove"!=this.attribute("fill").valueOrDefault("remove")||this.removed?!1:(this.removed=!0,this.getProperty().value=this.initialValue,!0);this.duration=0}return this.duration+=t,t=!1,this.begin<this.duration&&(t=this.calcValue(),this.attribute("type").hasValue()&&(t=this.attribute("type").value+"("+t+")"),this.getProperty().value=t,t=!0),t},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var e={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var i=e.progress*(this.values.value.length-1),n=Math.floor(i),r=Math.ceil(i);e.from=new t.Property("from",parseFloat(this.values.value[n])),e.to=new t.Property("to",parseFloat(this.values.value[r])),e.progress=(i-n)/(r-n)}else e.from=this.from,e.to=this.to;return e}},t.Element.AnimateBase.prototype=new t.Element.ElementBase,t.Element.animate=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){var t=this.progress();return t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress+this.initialUnits}},t.Element.animate.prototype=new t.Element.AnimateBase,t.Element.animateColor=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){var t=this.progress(),e=new RGBColor(t.from.value),i=new RGBColor(t.to.value);if(e.ok&&i.ok){var n=e.g+(i.g-e.g)*t.progress,r=e.b+(i.b-e.b)*t.progress;return"rgb("+parseInt(e.r+(i.r-e.r)*t.progress,10)+","+parseInt(n,10)+","+parseInt(r,10)+")"}return this.attribute("from").value}},t.Element.animateColor.prototype=new t.Element.AnimateBase,t.Element.animateTransform=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){for(var e=this.progress(),i=t.ToNumberArray(e.from.value),n=t.ToNumberArray(e.to.value),r="",a=0;a<i.length;a++)r+=i[a]+(n[a]-i[a])*e.progress+" ";return r}},t.Element.animateTransform.prototype=new t.Element.animate,t.Element.font=function(e){for(this.base=t.Element.ElementBase,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isArabic=this.isRTL=!1,this.missingGlyph=this.fontFace=null,this.glyphs=[],e=0;e<this.children.length;e++){var i=this.children[e];"font-face"==i.type?(this.fontFace=i,i.style("font-family").hasValue()&&(t.Definitions[i.style("font-family").value]=this)):"missing-glyph"==i.type?this.missingGlyph=i:"glyph"==i.type&&(""!=i.arabicForm?(this.isArabic=this.isRTL=!0,"undefined"==typeof this.glyphs[i.unicode]&&(this.glyphs[i.unicode]=[]),this.glyphs[i.unicode][i.arabicForm]=i):this.glyphs[i.unicode]=i)}},t.Element.font.prototype=new t.Element.ElementBase,t.Element.fontface=function(e){this.base=t.Element.ElementBase,this.base(e),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},t.Element.fontface.prototype=new t.Element.ElementBase,t.Element.missingglyph=function(e){this.base=t.Element.path,this.base(e),this.horizAdvX=0},t.Element.missingglyph.prototype=new t.Element.path,t.Element.glyph=function(e){this.base=t.Element.path,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},t.Element.glyph.prototype=new t.Element.path,t.Element.text=function(e){this.captureTextNodes=!0,this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.style("dominant-baseline").hasValue()&&(t.textBaseline=this.style("dominant-baseline").value),this.style("alignment-baseline").hasValue()&&(t.textBaseline=this.style("alignment-baseline").value)},this.getBoundingBox=function(){return new t.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)},this.renderChildren=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.x+=this.getAnchorDelta(t,this,0);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,e)},this.getAnchorDelta=function(t,e,i){var n=this.style("text-anchor").valueOrDefault("start");if("start"!=n){for(var r=0,a=i;a<e.children.length;a++){var s=e.children[a];if(a>i&&s.attribute("x").hasValue())break;r+=s.measureTextRecursive(t)}return-1*("end"==n?r:r/2)}return 0},this.renderChild=function(t,e,i){var n=e.children[i];for(n.attribute("x").hasValue()?n.x=n.attribute("x").toPixels("x")+this.getAnchorDelta(t,e,i):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),n.attribute("dx").hasValue()&&(this.x+=n.attribute("dx").toPixels("x")),n.x=this.x),this.x=n.x+n.measureText(t),n.attribute("y").hasValue()?n.y=n.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),n.attribute("dy").hasValue()&&(this.y+=n.attribute("dy").toPixels("y")),n.y=this.y),this.y=n.y,n.render(t),i=0;i<n.children.length;i++)this.renderChild(t,n,i)}},t.Element.text.prototype=new t.Element.RenderedElementBase,t.Element.TextElementBase=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.getGlyph=function(t,e,i){var n=e[i],r=null;if(t.isArabic){var a="isolated";(0==i||" "==e[i-1])&&i<e.length-2&&" "!=e[i+1]&&(a="terminal"),i>0&&" "!=e[i-1]&&i<e.length-2&&" "!=e[i+1]&&(a="medial"),i>0&&" "!=e[i-1]&&(i==e.length-1||" "==e[i+1])&&(a="initial"),"undefined"!=typeof t.glyphs[n]&&(r=t.glyphs[n][a],null==r&&"glyph"==t.glyphs[n].type&&(r=t.glyphs[n]))}else r=t.glyphs[n];return null==r&&(r=t.missingGlyph),r},this.renderChildren=function(e){var i=this.parent.style("font-family").getDefinition();if(null!=i){var n=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize),r=this.parent.style("font-style").valueOrDefault(t.Font.Parse(t.ctx.font).fontStyle),a=this.getText();i.isRTL&&(a=a.split("").reverse().join(""));for(var s=t.ToNumberArray(this.parent.attribute("dx").value),o=0;o<a.length;o++){var l=this.getGlyph(i,a,o),h=n/i.fontFace.unitsPerEm;e.translate(this.x,this.y),e.scale(h,-h);var u=e.lineWidth;e.lineWidth=e.lineWidth*i.fontFace.unitsPerEm/n,"italic"==r&&e.transform(1,0,.4,1,0,0),l.render(e),"italic"==r&&e.transform(1,0,-.4,1,0,0),e.lineWidth=u,e.scale(1/h,-1/h),e.translate(-this.x,-this.y),this.x+=n*(l.horizAdvX||i.horizAdvX)/i.fontFace.unitsPerEm,"undefined"==typeof s[o]||isNaN(s[o])||(this.x+=s[o])}}else""!=e.fillStyle&&e.fillText(t.compressSpaces(this.getText()),this.x,this.y),""!=e.strokeStyle&&e.strokeText(t.compressSpaces(this.getText()),this.x,this.y)},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),i=0;i<this.children.length;i++)e+=this.children[i].measureTextRecursive(t);return e},this.measureText=function(e){var i=this.parent.style("font-family").getDefinition();if(null!=i){e=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize);var n=0,r=this.getText();i.isRTL&&(r=r.split("").reverse().join(""));for(var a=t.ToNumberArray(this.parent.attribute("dx").value),s=0;s<r.length;s++){var o=this.getGlyph(i,r,s),n=n+(o.horizAdvX||i.horizAdvX)*e/i.fontFace.unitsPerEm;"undefined"==typeof a[s]||isNaN(a[s])||(n+=a[s])}return n}return i=t.compressSpaces(this.getText()),e.measureText?(e.save(),this.setContext(e),i=e.measureText(i).width,e.restore(),i):10*i.length}},t.Element.TextElementBase.prototype=new t.Element.RenderedElementBase,t.Element.tspan=function(e){this.captureTextNodes=!0,this.base=t.Element.TextElementBase,this.base(e),this.text=e.nodeValue||e.text||"",this.getText=function(){return this.text}},t.Element.tspan.prototype=new t.Element.TextElementBase,t.Element.tref=function(e){this.base=t.Element.TextElementBase,this.base(e),this.getText=function(){var t=this.getHrefAttribute().getDefinition();return null!=t?t.children[0].getText():void 0}},t.Element.tref.prototype=new t.Element.TextElementBase,t.Element.a=function(e){this.base=t.Element.TextElementBase,this.base(e),this.hasText=!0;for(var i=0;i<e.childNodes.length;i++)3!=e.childNodes[i].nodeType&&(this.hasText=!1);this.text=this.hasText?e.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(e){if(this.hasText){this.baseRenderChildren(e);var i=new t.Property("fontSize",t.Font.Parse(t.ctx.font).fontSize);t.Mouse.checkBoundingBox(this,new t.BoundingBox(this.x,this.y-i.toPixels("y"),this.x+this.measureText(e),this.y))}else i=new t.Element.g,i.children=this.children,i.parent=this,i.render(e)},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){t.ctx.canvas.style.cursor="pointer"}},t.Element.a.prototype=new t.Element.TextElementBase,t.Element.image=function(e){this.base=t.Element.RenderedElementBase,this.base(e);var i=this.getHrefAttribute().value,n=i.match(/\.svg$/);if(t.Images.push(this),this.loaded=!1,n)this.img=t.ajax(i),this.loaded=!0;else{this.img=document.createElement("img");var r=this;this.img.onload=function(){r.loaded=!0},this.img.onerror=function(){"undefined"!=typeof console&&(console.log('ERROR: image "'+i+'" not found'),r.loaded=!0)},this.img.src=i}this.renderChildren=function(e){var i=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");0!=a&&0!=s&&(e.save(),n?e.drawSvg(this.img,i,r,a,s):(e.translate(i,r),t.AspectRatio(e,this.attribute("preserveAspectRatio").value,a,this.img.width,s,this.img.height,0,0),e.drawImage(this.img,0,0)),e.restore())},this.getBoundingBox=function(){var e=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),n=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");return new t.BoundingBox(e,i,e+n,i+r)}},t.Element.image.prototype=new t.Element.RenderedElementBase,t.Element.g=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.getBoundingBox=function(){for(var e=new t.BoundingBox,i=0;i<this.children.length;i++)e.addBoundingBox(this.children[i].getBoundingBox());return e}},t.Element.g.prototype=new t.Element.RenderedElementBase,t.Element.symbol=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(e){if(this.baseSetContext(e),this.attribute("viewBox").hasValue()){var i=t.ToNumberArray(this.attribute("viewBox").value),n=i[0],r=i[1];width=i[2],height=i[3],t.AspectRatio(e,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,n,r),t.ViewPort.SetCurrent(i[2],i[3])}}},t.Element.symbol.prototype=new t.Element.RenderedElementBase,t.Element.style=function(e){this.base=t.Element.ElementBase,this.base(e);for(var i="",n=0;n<e.childNodes.length;n++)i+=e.childNodes[n].nodeValue;for(i=i.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),i=t.compressSpaces(i),e=i.split("}"),n=0;n<e.length;n++)if(""!=t.trim(e[n]))for(var r=e[n].split("{"),i=r[0].split(","),r=r[1].split(";"),a=0;a<i.length;a++){var s=t.trim(i[a]);if(""!=s){for(var o={},l=0;l<r.length;l++){var h=r[l].indexOf(":"),u=r[l].substr(0,h),h=r[l].substr(h+1,r[l].length-h);null!=u&&null!=h&&(o[t.trim(u)]=new t.Property(t.trim(u),t.trim(h)))}if(t.Styles[s]=o,"@font-face"==s)for(s=o["font-family"].value.replace(/"/g,""),o=o.src.value.split(","),l=0;l<o.length;l++)if(0<o[l].indexOf('format("svg")'))for(u=o[l].indexOf("url"),h=o[l].indexOf(")",u),u=o[l].substr(u+5,h-u-6),u=t.parseXml(t.ajax(u)).getElementsByTagName("font"),h=0;h<u.length;h++){var c=t.CreateElement(u[h]);t.Definitions[s]=c}}}},t.Element.style.prototype=new t.Element.ElementBase,t.Element.use=function(e){this.base=t.Element.RenderedElementBase,
this.base(e),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))},this.getDefinition=function(){var t=this.getHrefAttribute().getDefinition();return this.attribute("width").hasValue()&&(t.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(t.attribute("height",!0).value=this.attribute("height").value),t},this.path=function(t){var e=this.getDefinition();null!=e&&e.path(t)},this.getBoundingBox=function(){var t=this.getDefinition();return null!=t?t.getBoundingBox():void 0},this.renderChildren=function(t){var e=this.getDefinition();if(null!=e){var i=e.parent;e.parent=null,e.render(t),e.parent=i}}},t.Element.use.prototype=new t.Element.RenderedElementBase,t.Element.mask=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(e,i){var n=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");if(0==a&&0==s){for(s=new t.BoundingBox,n=0;n<this.children.length;n++)s.addBoundingBox(this.children[n].getBoundingBox());n=Math.floor(s.x1),r=Math.floor(s.y1),a=Math.floor(s.width()),s=Math.floor(s.height())}var o=i.attribute("mask").value;i.attribute("mask").value="";var l=document.createElement("canvas");l.width=n+a,l.height=r+s;var h=l.getContext("2d");this.renderChildren(h);var u=document.createElement("canvas");u.width=n+a,u.height=r+s;var c=u.getContext("2d");i.render(c),c.globalCompositeOperation="destination-in",c.fillStyle=h.createPattern(l,"no-repeat"),c.fillRect(0,0,n+a,r+s),e.fillStyle=c.createPattern(u,"no-repeat"),e.fillRect(0,0,n+a,r+s),i.attribute("mask").value=o},this.render=function(t){}},t.Element.mask.prototype=new t.Element.ElementBase,t.Element.clipPath=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(e){for(var i=0;i<this.children.length;i++){var n=this.children[i];if("undefined"!=typeof n.path){var r=null;n.attribute("transform").hasValue()&&(r=new t.Transform(n.attribute("transform").value),r.apply(e)),n.path(e),e.clip(),r&&r.unapply(e)}}},this.render=function(t){}},t.Element.clipPath.prototype=new t.Element.ElementBase,t.Element.filter=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e){var i=e.getBoundingBox(),n=Math.floor(i.x1),r=Math.floor(i.y1),a=Math.floor(i.width()),i=Math.floor(i.height()),s=e.style("filter").value;e.style("filter").value="";for(var o=0,l=0,h=0;h<this.children.length;h++)var u=this.children[h].extraFilterDistance||0,o=Math.max(o,u),l=Math.max(l,u);u=document.createElement("canvas"),u.width=a+2*o,u.height=i+2*l;var c=u.getContext("2d");for(c.translate(-n+o,-r+l),e.render(c),h=0;h<this.children.length;h++)this.children[h].apply(c,0,0,a+2*o,i+2*l);t.drawImage(u,0,0,a+2*o,i+2*l,n-o,r-l,a+2*o,i+2*l),e.style("filter",!0).value=s},this.render=function(t){}},t.Element.filter.prototype=new t.Element.ElementBase,t.Element.feMorphology=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e,i,n,r){}},t.Element.feMorphology.prototype=new t.Element.ElementBase,t.Element.feColorMatrix=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e,i,n,r){var a=t.getImageData(0,0,n,r);for(i=0;r>i;i++)for(e=0;n>e;e++){var s=(a.data[i*n*4+4*e+0]+a.data[i*n*4+4*e+1]+a.data[i*n*4+4*e+2])/3;a.data[i*n*4+4*e+0]=s,a.data[i*n*4+4*e+1]=s,a.data[i*n*4+4*e+2]=s}t.clearRect(0,0,n,r),t.putImageData(a,0,0)}},t.Element.feColorMatrix.prototype=new t.Element.ElementBase,t.Element.feGaussianBlur=function(e){this.base=t.Element.ElementBase,this.base(e),this.extraFilterDistance=this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.apply=function(e,i,n,r,a){"undefined"==typeof stackBlurCanvasRGBA?"undefined"!=typeof console&&console.log("ERROR: StackBlur.js must be included for blur to work"):(e.canvas.id=t.UniqueId(),e.canvas.style.display="none",document.body.appendChild(e.canvas),stackBlurCanvasRGBA(e.canvas.id,i,n,r,a,this.blurRadius),document.body.removeChild(e.canvas))}},t.Element.feGaussianBlur.prototype=new t.Element.ElementBase,t.Element.title=function(t){},t.Element.title.prototype=new t.Element.ElementBase,t.Element.desc=function(t){},t.Element.desc.prototype=new t.Element.ElementBase,t.Element.MISSING=function(t){"undefined"!=typeof console&&console.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},t.Element.MISSING.prototype=new t.Element.ElementBase,t.CreateElement=function(e){var i=e.nodeName.replace(/^[^:]+:/,""),i=i.replace(/\-/g,""),n=null,n="undefined"!=typeof t.Element[i]?new t.Element[i](e):new t.Element.MISSING(e);return n.type=e.nodeName,n},t.load=function(e,i){t.loadXml(e,t.ajax(i))},t.loadXml=function(e,i){t.loadXmlDoc(e,t.parseXml(i))},t.loadXmlDoc=function(e,i){t.init(e);var n=function(t){for(var i=e.canvas;i;)t.x-=i.offsetLeft,t.y-=i.offsetTop,i=i.offsetParent;return window.scrollX&&(t.x+=window.scrollX),window.scrollY&&(t.y+=window.scrollY),t};1!=t.opts.ignoreMouse&&(e.canvas.onclick=function(e){e=n(new t.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY)),t.Mouse.onclick(e.x,e.y)},e.canvas.onmousemove=function(e){e=n(new t.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY)),t.Mouse.onmousemove(e.x,e.y)});var r=t.CreateElement(i.documentElement),a=r.root=!0,s=function(){t.ViewPort.Clear(),e.canvas.parentNode&&t.ViewPort.SetCurrent(e.canvas.parentNode.clientWidth,e.canvas.parentNode.clientHeight),1!=t.opts.ignoreDimensions&&(r.style("width").hasValue()&&(e.canvas.width=r.style("width").toPixels("x"),e.canvas.style.width=e.canvas.width+"px"),r.style("height").hasValue()&&(e.canvas.height=r.style("height").toPixels("y"),e.canvas.style.height=e.canvas.height+"px"));var n=e.canvas.clientWidth||e.canvas.width,s=e.canvas.clientHeight||e.canvas.height;if(1==t.opts.ignoreDimensions&&r.style("width").hasValue()&&r.style("height").hasValue()&&(n=r.style("width").toPixels("x"),s=r.style("height").toPixels("y")),t.ViewPort.SetCurrent(n,s),null!=t.opts.offsetX&&(r.attribute("x",!0).value=t.opts.offsetX),null!=t.opts.offsetY&&(r.attribute("y",!0).value=t.opts.offsetY),null!=t.opts.scaleWidth&&null!=t.opts.scaleHeight){var o=1,l=1,h=t.ToNumberArray(r.attribute("viewBox").value);r.attribute("width").hasValue()?o=r.attribute("width").toPixels("x")/t.opts.scaleWidth:isNaN(h[2])||(o=h[2]/t.opts.scaleWidth),r.attribute("height").hasValue()?l=r.attribute("height").toPixels("y")/t.opts.scaleHeight:isNaN(h[3])||(l=h[3]/t.opts.scaleHeight),r.attribute("width",!0).value=t.opts.scaleWidth,r.attribute("height",!0).value=t.opts.scaleHeight,r.attribute("viewBox",!0).value="0 0 "+n*o+" "+s*l,r.attribute("preserveAspectRatio",!0).value="none"}1!=t.opts.ignoreClear&&e.clearRect(0,0,n,s),r.render(e),a&&(a=!1,"function"==typeof t.opts.renderCallback&&t.opts.renderCallback(i))},o=!0;t.ImagesLoaded()&&(o=!1,s()),t.intervalID=setInterval(function(){var e=!1;if(o&&t.ImagesLoaded()&&(o=!1,e=!0),1!=t.opts.ignoreMouse&&(e|=t.Mouse.hasEvents()),1!=t.opts.ignoreAnimation)for(var i=0;i<t.Animations.length;i++)e|=t.Animations[i].update(1e3/t.FRAMERATE);"function"==typeof t.opts.forceRedraw&&1==t.opts.forceRedraw()&&(e=!0),e&&(s(),t.Mouse.runEvents())},1e3/t.FRAMERATE)},t.stop=function(){t.intervalID&&clearInterval(t.intervalID)},t.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var i=0;i<this.events.length;i++){var n=this.events[i];e.isPointInPath&&e.isPointInPath(n.x,n.y)&&(this.eventElements[i]=t)}},this.checkBoundingBox=function(t,e){for(var i=0;i<this.events.length;i++){var n=this.events[i];e.isPointInBox(n.x,n.y)&&(this.eventElements[i]=t)}},this.runEvents=function(){t.ctx.canvas.style.cursor="";for(var e=0;e<this.events.length;e++)for(var i=this.events[e],n=this.eventElements[e];n;)i.run(n),n=n.parent;this.events=[],this.eventElements=[]}},t}this.canvg=function(e,i,n){if(null==e&&null==i&&null==n){i=document.getElementsByTagName("svg");for(var r=0;r<i.length;r++){e=i[r],n=document.createElement("canvas"),n.width=e.clientWidth,n.height=e.clientHeight,e.parentNode.insertBefore(n,e),e.parentNode.removeChild(e);var a=document.createElement("div");a.appendChild(e),canvg(n,a.innerHTML)}}else n=n||{},"string"==typeof e&&(e=document.getElementById(e)),null!=e.svg&&e.svg.stop(),r=t(),1==e.childNodes.length&&"OBJECT"==e.childNodes[0].nodeName||(e.svg=r),r.opts=n,e=e.getContext("2d"),"undefined"!=typeof i.documentElement?r.loadXmlDoc(e,i):"<"==i.substr(0,1)?r.loadXml(e,i):r.load(e,i)}}(),"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,i,n,r){canvg(this.canvas,t,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:i,scaleWidth:n,scaleHeight:r})}),AmCharts.isModern){var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(t){var e=t.document,i=t.URL||t.webkitURL||t,n=e.createElementNS("http://www.w3.org/1999/xhtml","a"),r=!t.externalHost&&"download"in n,a=t.webkitRequestFileSystem,s=t.requestFileSystem||a||t.mozRequestFileSystem,o=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},l=0,h=[],u=function(t,e,i){e=[].concat(e);for(var n=e.length;n--;){var r=t["on"+e[n]];if("function"==typeof r)try{r.call(t,i||t)}catch(a){o(a)}}},c=function(i,o){var c,d,f,p=this,m=i.type,g=!1,y=function(){var e=(t.URL||t.webkitURL||t).createObjectURL(i);return h.push(e),e},v=function(){u(p,["writestart","progress","write","writeend"])},b=function(){!g&&c||(c=y(i)),d?d.location.href=c:window.open(c,"_blank"),p.readyState=p.DONE,v()},x=function(t){return function(){return p.readyState!==p.DONE?t.apply(this,arguments):void 0}},w={create:!0,exclusive:!1};p.readyState=p.INIT,o||(o="download"),r?(c=y(i),e=t.document,n=e.createElementNS("http://www.w3.org/1999/xhtml","a"),n.href=c,n.download=o,m=e.createEvent("MouseEvents"),m.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(m),p.readyState=p.DONE,v()):(t.chrome&&m&&"application/octet-stream"!==m&&(f=i.slice||i.webkitSlice,i=f.call(i,0,i.size,"application/octet-stream"),g=!0),a&&"download"!==o&&(o+=".download"),("application/octet-stream"===m||a)&&(d=t),s?(l+=i.size,s(t.TEMPORARY,l,x(function(t){t.root.getDirectory("saved",w,x(function(t){var e=function(){t.getFile(o,w,x(function(t){t.createWriter(x(function(e){e.onwriteend=function(e){d.location.href=t.toURL(),h.push(t),p.readyState=p.DONE,u(p,"writeend",e)},e.onerror=function(){var t=e.error;t.code!==t.ABORT_ERR&&b()},["writestart","progress","write","abort"].forEach(function(t){e["on"+t]=p["on"+t]}),e.write(i),p.abort=function(){e.abort(),p.readyState=p.DONE},p.readyState=p.WRITING}),b)}),b)};t.getFile(o,{create:!1},x(function(t){t.remove(),e()}),x(function(t){t.code===t.NOT_FOUND_ERR?e():b()}))}),b)}),b)):b())},d=c.prototype;return d.abort=function(){this.readyState=this.DONE,u(this,"abort")},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,t.addEventListener("unload",function(){for(var t=h.length;t--;){var e=h[t];"string"==typeof e?i.revokeObjectURL(e):e.remove()}h.length=0},!1),function(t,e){return new c(t,e)}}(this.self||this.window||this.content);"undefined"!=typeof module&&(module.exports=saveAs)}var jsPDF=function(){function t(n,r,a,s){n="undefined"==typeof n?"p":n.toString().toLowerCase(),"undefined"==typeof r&&(r="mm"),"undefined"==typeof a&&(a="a4"),"undefined"==typeof s&&"undefined"==typeof zpipe&&(s=!1);var o=a.toString().toLowerCase(),l=[],h=0,u=s;s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224]};var c,d,f,p,m,g,y,v,b="0 g",x=0,w=[],E=2,P=!1,C=[],B={},A={},T=16,S={title:"",subject:"",author:"",keywords:"",creator:""},k=0,V=0,D={},M=new i(D),R=function(t){return t.toFixed(2)},I=function(t){var e=t.toFixed(0);return 10>t?"0"+e:e},O=function(t){P?w[x].push(t):(l.push(t),h+=t.length+1)},F=function(){return E++,C[E]=h,O(E+" 0 obj"),E},N=function(t){O("stream"),O(t),O("endstream")},j=function(t,e){var i;i=t;var n,r,a,s,o,l,h=e;if(void 0===h&&(h={}),n=h.sourceEncoding?n:"Unicode",a=h.outputEncoding,(h.autoencode||a)&&B[c].metadata&&B[c].metadata[n]&&B[c].metadata[n].encoding&&(n=B[c].metadata[n].encoding,!a&&B[c].encoding&&(a=B[c].encoding),!a&&n.codePages&&(a=n.codePages[0]),"string"==typeof a&&(a=n[a]),a)){for(o=!1,s=[],n=0,r=i.length;r>n;n++)(l=a[i.charCodeAt(n)])?s.push(String.fromCharCode(l)):s.push(i[n]),s[n].charCodeAt(0)>>8&&(o=!0);i=s.join("")}for(n=i.length;void 0===o&&0!==n;)i.charCodeAt(n-1)>>8&&(o=!0),n--;if(o){for(s=h.noBOM?[]:[254,255],n=0,r=i.length;r>n;n++){if(l=i.charCodeAt(n),h=l>>8,h>>8)throw Error("Character at position "+n.toString(10)+" of string '"+i+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(h),s.push(l-(h<<8))}i=String.fromCharCode.apply(void 0,s)}return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},U=function(){x++,P=!0,w[x]=[],O(R(.200025*p)+" w"),O("0 G"),0!==k&&O(k.toString(10)+" J"),0!==V&&O(V.toString(10)+" j"),M.publish("addPage",{pageNumber:x})},L=function(t,e){var i;void 0===t&&(t=B[c].fontName),void 0===e&&(e=B[c].fontStyle);try{i=A[t][e]}catch(n){i=void 0}if(!i)throw Error("Unable to look up font label for font '"+t+"', '"+e+"'. Refer to getFontList() for available fonts.");return i},G=function(){P=!1,l=[],C=[],O("%PDF-1.3"),g=f*p,y=d*p;var t,e,i,n,r;for(t=1;x>=t;t++){if(F(),O("<</Type /Page"),O("/Parent 1 0 R"),O("/Resources 2 0 R"),O("/Contents "+(E+1)+" 0 R>>"),O("endobj"),e=w[t].join("\n"),F(),u){for(i=[],n=0;n<e.length;++n)i[n]=e.charCodeAt(n);r=adler32cs.from(e),e=new Deflater(6),e.append(new Uint8Array(i)),e=e.flush(),i=[new Uint8Array([120,156]),new Uint8Array(e),new Uint8Array([255&r,r>>8&255,r>>16&255,r>>24&255])],e="";for(n in i)i.hasOwnProperty(n)&&(e+=String.fromCharCode.apply(null,i[n]));O("<</Length "+e.length+" /Filter [/FlateDecode]>>")}else O("<</Length "+e.length+">>");N(e),O("endobj")}for(C[1]=h,O("1 0 obj"),O("<</Type /Pages"),v="/Kids [",n=0;x>n;n++)v+=3+2*n+" 0 R ";O(v+"]"),O("/Count "+x),O("/MediaBox [0 0 "+R(g)+" "+R(y)+"]"),O(">>"),O("endobj");for(var a in B)B.hasOwnProperty(a)&&(t=B[a],t.objectNumber=F(),O("<</BaseFont/"+t.PostScriptName+"/Type/Font"),"string"==typeof t.encoding&&O("/Encoding/"+t.encoding),O("/Subtype/Type1>>"),O("endobj"));M.publish("putResources"),C[2]=h,O("2 0 obj"),O("<<"),O("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),O("/Font <<");for(var s in B)B.hasOwnProperty(s)&&O("/"+s+" "+B[s].objectNumber+" 0 R");for(O(">>"),O("/XObject <<"),M.publish("putXobjectDict"),O(">>"),O(">>"),O("endobj"),M.publish("postPutResources"),F(),O("<<"),O("/Producer (jsPDF 0.9.0rc2)"),S.title&&O("/Title ("+j(S.title)+")"),S.subject&&O("/Subject ("+j(S.subject)+")"),S.author&&O("/Author ("+j(S.author)+")"),S.keywords&&O("/Keywords ("+j(S.keywords)+")"),S.creator&&O("/Creator ("+j(S.creator)+")"),a=new Date,O("/CreationDate (D:"+[a.getFullYear(),I(a.getMonth()+1),I(a.getDate()),I(a.getHours()),I(a.getMinutes()),I(a.getSeconds())].join("")+")"),O(">>"),O("endobj"),F(),O("<<"),O("/Type /Catalog"),O("/Pages 1 0 R"),O("/OpenAction [3 0 R /FitH null]"),O("/PageLayout /OneColumn"),M.publish("putCatalog"),O(">>"),O("endobj"),a=h,O("xref"),O("0 "+(E+1)),O("0000000000 65535 f "),s=1;E>=s;s++)t=C[s].toFixed(0),t=10>t.length?Array(11-t.length).join("0")+t:t,O(t+" 00000 n ");return O("trailer"),O("<<"),O("/Size "+(E+1)),O("/Root "+E+" 0 R"),O("/Info "+(E-1)+" 0 R"),O(">>"),O("startxref"),O(a),O("%%EOF"),P=!0,l.join("\n")},z=function(t){var e="S";return"F"===t?e="f":"FD"!==t&&"DF"!==t||(e="B"),e},X=function(t,e){var i,n,r,a;switch(t){case void 0:return G();case"save":if(navigator.getUserMedia&&(void 0===window.URL||void 0===window.URL.createObjectURL))return D.output("dataurlnewwindow");for(i=G(),n=i.length,r=new Uint8Array(new ArrayBuffer(n)),a=0;n>a;a++)r[a]=i.charCodeAt(a);i=new Blob([r],{type:"application/pdf"}),saveAs(i,e);break;case"datauristring":case"dataurlstring":return"data:application/pdf;base64,"+btoa(G());case"datauri":case"dataurl":document.location.href="data:application/pdf;base64,"+btoa(G());break;case"dataurlnewwindow":window.open("data:application/pdf;base64,"+btoa(G()));break;default:throw Error('Output type "'+t+'" is not supported.')}};if("pt"===r)p=1;else if("mm"===r)p=72/25.4;else if("cm"===r)p=72/2.54;else{if("in"!==r)throw"Invalid unit: "+r;p=72}if(s.hasOwnProperty(o))d=s[o][1]/p,f=s[o][0]/p;else try{d=a[1],f=a[0]}catch(q){throw"Invalid format: "+a}if("p"===n||"portrait"===n)n="p",f>d&&(n=f,f=d,d=n);else{if("l"!==n&&"landscape"!==n)throw"Invalid orientation: "+n;n="l",d>f&&(n=f,f=d,d=n)}D.internal={pdfEscape:j,getStyle:z,getFont:function(){return B[L.apply(D,arguments)]},getFontSize:function(){return T},getLineHeight:function(){return 1.15*T},btoa:btoa,write:function(t,e,i,n){O(1===arguments.length?t:Array.prototype.join.call(arguments," "))},getCoordinateString:function(t){return R(t*p)},getVerticalCoordinateString:function(t){return R((d-t)*p)},collections:{},newObject:F,putStream:N,events:M,scaleFactor:p,pageSize:{width:f,height:d},output:function(t,e){return X(t,e)},getNumberOfPages:function(){return w.length-1},pages:w},D.addPage=function(){return U(),this},D.text=function(t,e,i,n){var r,a;if("number"==typeof t&&(r=t,a=e,t=i,e=r,i=a),"string"==typeof t&&t.match(/[\n\r]/)&&(t=t.split(/\r\n|\r|\n/g)),"undefined"==typeof n?n={noBOM:!0,autoencode:!0}:(void 0===n.noBOM&&(n.noBOM=!0),void 0===n.autoencode&&(n.autoencode=!0)),"string"==typeof t)n=j(t,n);else{if(!(t instanceof Array))throw Error('Type of text must be string or Array. "'+t+'" is not recognized.');for(t=t.concat(),r=t.length-1;-1!==r;r--)t[r]=j(t[r],n);n=t.join(") Tj\nT* (")}return O("BT\n/"+c+" "+T+" Tf\n"+1.15*T+" TL\n"+b+"\n"+R(e*p)+" "+R((d-i)*p)+" Td\n("+n+") Tj\nET"),this},D.line=function(t,e,i,n){return O(R(t*p)+" "+R((d-e)*p)+" m "+R(i*p)+" "+R((d-n)*p)+" l S"),this},D.lines=function(t,e,i,n,r,a){var s,o,l,h,u,c,f,m;for("number"==typeof t&&(s=t,o=e,t=i,e=s,i=o),r=z(r),n=void 0===n?[1,1]:n,O((e*p).toFixed(3)+" "+((d-i)*p).toFixed(3)+" m "),s=n[0],n=n[1],o=t.length,m=i,i=0;o>i;i++)l=t[i],2===l.length?(e=l[0]*s+e,m=l[1]*n+m,O((e*p).toFixed(3)+" "+((d-m)*p).toFixed(3)+" l")):(h=l[0]*s+e,u=l[1]*n+m,c=l[2]*s+e,f=l[3]*n+m,e=l[4]*s+e,m=l[5]*n+m,O((h*p).toFixed(3)+" "+((d-u)*p).toFixed(3)+" "+(c*p).toFixed(3)+" "+((d-f)*p).toFixed(3)+" "+(e*p).toFixed(3)+" "+((d-m)*p).toFixed(3)+" c"));return 1==a&&O(" h"),O(r),this},D.rect=function(t,e,i,n,r){return r=z(r),O([R(t*p),R((d-e)*p),R(i*p),R(-n*p),"re",r].join(" ")),this},D.triangle=function(t,e,i,n,r,a,s){return this.lines([[i-t,n-e],[r-i,a-n],[t-r,e-a]],t,e,[1,1],s,!0),this},D.roundedRect=function(t,e,i,n,r,a,s){var o=4/3*(Math.SQRT2-1);return this.lines([[i-2*r,0],[r*o,0,r,a-a*o,r,a],[0,n-2*a],[0,a*o,-(r*o),a,-r,a],[-i+2*r,0],[-(r*o),0,-r,-(a*o),-r,-a],[0,-n+2*a],[0,-(a*o),r*o,-a,r,-a]],t+r,e,[1,1],s),this},D.ellipse=function(t,e,i,n,r){r=z(r);var a=4/3*(Math.SQRT2-1)*i,s=4/3*(Math.SQRT2-1)*n;return O([R((t+i)*p),R((d-e)*p),"m",R((t+i)*p),R((d-(e-s))*p),R((t+a)*p),R((d-(e-n))*p),R(t*p),R((d-(e-n))*p),"c"].join(" ")),O([R((t-a)*p),R((d-(e-n))*p),R((t-i)*p),R((d-(e-s))*p),R((t-i)*p),R((d-e)*p),"c"].join(" ")),O([R((t-i)*p),R((d-(e+s))*p),R((t-a)*p),R((d-(e+n))*p),R(t*p),R((d-(e+n))*p),"c"].join(" ")),O([R((t+a)*p),R((d-(e+n))*p),R((t+i)*p),R((d-(e+s))*p),R((t+i)*p),R((d-e)*p),"c",r].join(" ")),this},D.circle=function(t,e,i,n){return this.ellipse(t,e,i,i,n)},D.setProperties=function(t){for(var e in S)S.hasOwnProperty(e)&&t[e]&&(S[e]=t[e]);return this},D.setFontSize=function(t){return T=t,this},D.setFont=function(t,e){return c=L(t,e),this},D.setFontStyle=D.setFontType=function(t){return c=L(void 0,t),this},D.getFontList=function(){var t,e,i,n={};for(t in A)if(A.hasOwnProperty(t))for(e in n[t]=i=[],A[t])A[t].hasOwnProperty(e)&&i.push(e);return n},D.setLineWidth=function(t){return O((t*p).toFixed(2)+" w"),this},D.setDrawColor=function(t,e,i,n){return t=void 0===e||void 0===n&&t===e===i?"string"==typeof t?t+" G":R(t/255)+" G":void 0===n?"string"==typeof t?[t,e,i,"RG"].join(" "):[R(t/255),R(e/255),R(i/255),"RG"].join(" "):"string"==typeof t?[t,e,i,n,"K"].join(" "):[R(t),R(e),R(i),R(n),"K"].join(" "),O(t),this},D.setFillColor=function(t,e,i,n){return t=void 0===e||void 0===n&&t===e===i?"string"==typeof t?t+" g":R(t/255)+" g":void 0===n?"string"==typeof t?[t,e,i,"rg"].join(" "):[R(t/255),R(e/255),R(i/255),"rg"].join(" "):"string"==typeof t?[t,e,i,n,"k"].join(" "):[R(t),R(e),R(i),R(n),"k"].join(" "),O(t),this},D.setTextColor=function(t,e,i){var n=/#[0-9A-Fa-f]{6}/;return"string"==typeof t&&n.test(t)&&(t=t.replace("#",""),i=parseInt(t,16),t=i>>16&255,e=i>>8&255,i&=255),b=0===t&&0===e&&0===i||"undefined"==typeof e?(t/255).toFixed(3)+" g":[(t/255).toFixed(3),(e/255).toFixed(3),(i/255).toFixed(3),"rg"].join(" "),this},D.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},D.setLineCap=function(t){var e=this.CapJoinStyles[t];if(void 0===e)throw Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return k=e,O(e.toString(10)+" J"),this},D.setLineJoin=function(t){var e=this.CapJoinStyles[t];if(void 0===e)throw Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return V=e,O(e.toString(10)+" j"),this},D.output=X,D.save=function(t){D.output("save",t)};for(m in t.API)t.API.hasOwnProperty(m)&&("events"===m&&t.API.events.length?function(t,e){var i,n,r;for(r=e.length-1;-1!==r;r--)i=e[r][0],n=e[r][1],t.subscribe.apply(t,[i].concat("function"==typeof n?[n]:n))}(M,t.API.events):D[m]=t.API[m]);return function(){var t,i,n,r,a=[["Helvetica","helvetica","normal"],["Helvetica-Bold","helvetica","bold"],["Helvetica-Oblique","helvetica","italic"],["Helvetica-BoldOblique","helvetica","bolditalic"],["Courier","courier","normal"],["Courier-Bold","courier","bold"],["Courier-Oblique","courier","italic"],["Courier-BoldOblique","courier","bolditalic"],["Times-Roman","times","normal"],["Times-Bold","times","bold"],["Times-Italic","times","italic"],["Times-BoldItalic","times","bolditalic"]];for(t=0,i=a.length;i>t;t++){var s=a[t][0],o=a[t][1];n=a[t][2],r="F"+(e(B)+1).toString(10);var s=B[r]={id:r,PostScriptName:s,fontName:o,fontStyle:n,encoding:"StandardEncoding",metadata:{}},l=r;void 0===A[o]&&(A[o]={}),A[o][n]=l,M.publish("addFont",s),n=r,r=a[t][0].split("-"),s=r[0],r=r[1]||"",void 0===A[s]&&(A[s]={}),A[s][r]=n}M.publish("addFonts",{fonts:B,dictionary:A})}(),c="F1",U(),M.publish("initialized"),D}"undefined"==typeof btoa&&(window.btoa=function(t){var e,i,n,r,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),s=0,o=0,l="",l=[];do e=t.charCodeAt(s++),i=t.charCodeAt(s++),n=t.charCodeAt(s++),r=e<<16|i<<8|n,e=r>>18&63,i=r>>12&63,n=r>>6&63,r&=63,l[o++]=a[e]+a[i]+a[n]+a[r];while(s<t.length);return l=l.join(""),t=t.length%3,(t?l.slice(0,t-3):l)+"===".slice(t||3)}),"undefined"==typeof atob&&(window.atob=function(t){var e,i,n,r,a,s=0,o=0;r="";var l=[];if(!t)return t;t+="";do e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(s++)),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(s++)),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(s++)),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(s++)),n=e<<18|i<<12|r<<6|a,e=n>>16&255,i=n>>8&255,n&=255,64===r?l[o++]=String.fromCharCode(e):64===a?l[o++]=String.fromCharCode(e,i):l[o++]=String.fromCharCode(e,i,n);while(s<t.length);return r=l.join("")});var e="function"==typeof Object.keys?function(t){return Object.keys(t).length}:function(t){var e,i=0;for(e in t)t.hasOwnProperty(e)&&i++;return i},i=function(t){this.topics={},this.context=t,this.publish=function(t,e){if(this.topics[t]){var i,n,r,a,s=this.topics[t],o=[],l=function(){};for(e=Array.prototype.slice.call(arguments,1),n=0,r=s.length;r>n;n++)a=s[n],i=a[0],a[1]&&(a[0]=l,o.push(n)),i.apply(this.context,e);for(n=0,r=o.length;r>n;n++)s.splice(o[n],1)}},this.subscribe=function(t,e,i){return this.topics[t]?this.topics[t].push([e,i]):this.topics[t]=[[e,i]],{topic:t,callback:e}},this.unsubscribe=function(t){if(this.topics[t.topic]){var e,i,n=this.topics[t.topic];for(e=0,i=n.length;i>e;e++)n[e][0]===t.callback&&n.splice(e,1)}}};return t.API={events:[]},t}();!function(t){var e=function(){var t,e=this.internal.collections.addImage_images;for(t in e){var i=e[t],n=this.internal.newObject(),r=this.internal.write,a=this.internal.putStream;if(i.n=n,r("<</Type /XObject"),r("/Subtype /Image"),r("/Width "+i.w),r("/Height "+i.h),"Indexed"===i.cs?r("/ColorSpace [/Indexed /DeviceRGB "+(i.pal.length/3-1)+" "+(n+1)+" 0 R]"):(r("/ColorSpace /"+i.cs),"DeviceCMYK"===i.cs&&r("/Decode [1 0 1 0 1 0 1 0]")),r("/BitsPerComponent "+i.bpc),"f"in i&&r("/Filter /"+i.f),"dp"in i&&r("/DecodeParms <<"+i.dp+">>"),"trns"in i&&i.trns.constructor==Array)for(var s="",o=0;o<i.trns.length;o++)s+=i[s][o]+" "+i.trns[o]+" ",r("/Mask ["+s+"]");"smask"in i&&r("/SMask "+(n+1)+" 0 R"),r("/Length "+i.data.length+">>"),a(i.data),r("endobj")}},i=function(){var t,e,i=this.internal.collections.addImage_images,n=this.internal.write;for(e in i)t=i[e],n("/I"+t.i,t.n,"0","R")};t.addImage=function(t,n,r,a,s,o){if("object"==typeof t&&1===t.nodeType){n=document.createElement("canvas"),n.width=t.clientWidth,n.height=t.clientHeight;var l=n.getContext("2d");if(!l)throw"addImage requires canvas to be supported by browser.";l.drawImage(t,0,0,n.width,n.height),t=n.toDataURL("image/jpeg"),n="JPEG"}if("JPEG"!==n.toUpperCase())throw Error("addImage currently only supports format 'JPEG', not '"+n+"'");var h;n=this.internal.collections.addImage_images;var l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;if("data:image/jpeg;base64,"===t.substring(0,23)&&(t=atob(t.replace("data:image/jpeg;base64,",""))),n)if(Object.keys)h=Object.keys(n).length;else{var c=n,d=0;for(h in c)c.hasOwnProperty(h)&&d++;h=d}else h=0,this.internal.collections.addImage_images=n={},this.internal.events.subscribe("putResources",e),this.internal.events.subscribe("putXobjectDict",i);t:{var f,c=t;if(255===!c.charCodeAt(0)||216===!c.charCodeAt(1)||255===!c.charCodeAt(2)||224===!c.charCodeAt(3)||74===!c.charCodeAt(6)||70===!c.charCodeAt(7)||73===!c.charCodeAt(8)||70===!c.charCodeAt(9)||0===!c.charCodeAt(10))throw Error("getJpegSize requires a binary jpeg file");f=256*c.charCodeAt(4)+c.charCodeAt(5);for(var d=4,p=c.length;p>d;){if(d+=f,255!==c.charCodeAt(d))throw Error("getJpegSize could not find the size of the image");if(192===c.charCodeAt(d+1)||193===c.charCodeAt(d+1)||194===c.charCodeAt(d+1)||195===c.charCodeAt(d+1)||196===c.charCodeAt(d+1)||197===c.charCodeAt(d+1)||198===c.charCodeAt(d+1)||199===c.charCodeAt(d+1)){f=256*c.charCodeAt(d+5)+c.charCodeAt(d+6),c=256*c.charCodeAt(d+7)+c.charCodeAt(d+8),c=[c,f];break t}d+=2,f=256*c.charCodeAt(d)+c.charCodeAt(d+1)}c=void 0}return t={w:c[0],h:c[1],cs:"DeviceRGB",bpc:8,f:"DCTDecode",i:h,data:t},n[h]=t,s||o||(o=s=-96),0>s&&(s=-72*t.w/s/this.internal.scaleFactor),0>o&&(o=-72*t.h/o/this.internal.scaleFactor),0===s&&(s=o*t.w/t.h),0===o&&(o=s*t.h/t.w),this.internal.write("q",l(s),"0 0",l(o),l(r),u(a+o),"cm /I"+t.i,"Do Q"),this}}(jsPDF.API);